<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>一只小笨鸟</title>
  
  
  <link href="https://sugw.github.io/sugw.github.io/atom.xml" rel="self"/>
  
  <link href="https://sugw.github.io/sugw.github.io/"/>
  <updated>2020-10-20T09:06:44.719Z</updated>
  <id>https://sugw.github.io/sugw.github.io/</id>
  
  <author>
    <name>guowei su</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/20/hello-world/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/20/hello-world/</id>
    <published>2020-10-20T09:06:44.719Z</published>
    <updated>2020-10-20T09:06:44.719Z</updated>
    
    
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://localhost:4000/sugw.github.io/tags/&quot;&gt;http://localhost:4000/sugw.github.io/tags/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&amp;quot;My New Post&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="测试" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="标签1" scheme="https://sugw.github.io/sugw.github.io/tags/%E6%A0%87%E7%AD%BE1/"/>
    
    <category term="标签2" scheme="https://sugw.github.io/sugw.github.io/tags/%E6%A0%87%E7%AD%BE2/"/>
    
  </entry>
  
  <entry>
    <title>测试typora</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/20/%E4%B8%80%E7%BA%A7%E6%A0%87%E9%A2%98/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/20/%E4%B8%80%E7%BA%A7%E6%A0%87%E9%A2%98/</id>
    <published>2020-10-20T02:43:25.861Z</published>
    <updated>2020-10-20T08:58:54.862Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;一级标题&quot;&gt;&lt;a href=&quot;#一级标题&quot; class=&quot;headerlink&quot; title=&quot;一级标题&quot;&gt;&lt;/a&gt;一级标题&lt;/h1&gt;&lt;h2 id=&quot;二级标题&quot;&gt;&lt;a href=&quot;#二级标题&quot; class=&quot;headerlink&quot; title=&quot;二级标题&quot;&gt;&lt;/a&gt;二级标题&lt;/h2&gt;&lt;h3 id=&quot;三级标题&quot;&gt;&lt;a href=&quot;#三级标题&quot; class=&quot;headerlink&quot; title=&quot;三级标题&quot;&gt;&lt;/a&gt;三级标题&lt;/h3&gt;&lt;h6 id=&quot;主题&quot;&gt;&lt;a href=&quot;#主题&quot; class=&quot;headerlink&quot; title=&quot;主题&quot;&gt;&lt;/a&gt;主题&lt;/h6&gt;&lt;hr&gt;</summary>
    
    
    
    <category term="测试" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%B5%8B%E8%AF%95/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/nfs/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/nfs/</id>
    <published>2020-10-16T03:41:32.822Z</published>
    <updated>2020-10-16T03:27:17.372Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;mount -t nfs 172.16.1.31:/data/172.16.1.8 /application/nginx/html/www/wp-content/uploads&lt;/p&gt;
&lt;p&gt;/data</summary>
        
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/nfs%E6%90%AD%E5%BB%BA/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/nfs%E6%90%AD%E5%BB%BA/</id>
    <published>2020-10-16T03:41:32.819Z</published>
    <updated>2020-10-16T03:27:31.214Z</updated>
    
    
    <summary type="html">&lt;p&gt;&lt;del&gt;~&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;搭建环境&lt;br&gt;安装基础软件&lt;br&gt;yum install lrzsz nmap tree dos2unix nc -y&lt;br&gt;打补丁&lt;br&gt;yum update或者yum up grade&lt;br&gt;安装&lt;br&gt;yum install nfs-utils rpcbind -y&lt;br&gt;启动RPC&lt;br&gt;systemctl start rpcbind.service&lt;br&gt;查看RPc中的启动服务&lt;br&gt;rpcinfo -p localhost&lt;br&gt;启动nfs&lt;br&gt;systemctl start nfs.service&lt;br&gt;查看rpc中的服务&lt;br&gt;rpcinfo -p localhost&lt;br&gt;RPC端口：111&lt;br&gt;查看端口&lt;br&gt;netstat -lntup|grep rpcbind&lt;br&gt;lsof -i :rpcbind&lt;br&gt;查看rpc中的服务&lt;br&gt;rpcinfo -p localhost&lt;br&gt;启动nfs&lt;br&gt;/etc/init.d/nfs&lt;/p&gt;
&lt;p&gt;nfs配置文件&lt;br&gt;/etc/exports&lt;br&gt;rsync配置文件&lt;br&gt;/etc/rsyncd.conf&lt;/p&gt;
&lt;p&gt;每个程序都有一个虚拟用户，nfs虚拟用户是:&lt;br&gt;nfsnobody&lt;br&gt;创建nfs目录&lt;br&gt;mkdir /data -p&lt;br&gt;赋予nfs程序能读写权限&lt;br&gt;chown nfsnobody.nfsnobody /data&lt;br&gt;编辑nfs服务器配置文件&lt;br&gt;vim /etc/exports&lt;br&gt;注意些注释&lt;br&gt;#sharc /data by oldboy for bingbing at 20180518&lt;br&gt;/data 172.16.1.0/24(rw,sync)#sync是写到磁盘，如果不写则写到内存,async异步写入&lt;br&gt;以上配置需要注意&lt;br&gt;1.先启动rpcbind&lt;br&gt;2.后启动nfs&lt;br&gt;3.查看rpc状态&lt;br&gt;rpcinfo -p localhost&lt;/p&gt;
&lt;p&gt;重启nfs&lt;br&gt;/etc/init.d/nfs reload    平滑重启，已经到达服务器的请求处理完毕，没有到达的则就屏蔽掉&lt;br&gt;/etc/init.d/nfs reload ===pxportfs -rv&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/sersync%E5%AE%89%E8%A3%85/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/sersync%E5%AE%89%E8%A3%85/</id>
    <published>2020-10-16T03:41:31.486Z</published>
    <updated>2020-10-20T09:00:32.094Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;pre&gt;&lt;code&gt;1.下载工具
2.解压工具，规整目录
mkdir /application -p
mv sersync2.5.4_64bit_binary_stable_final.tar.gz /application/
cd application/
tar zxvf</summary>
        
      
    
    
    
    <category term="文件服务" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/sersync+rsync%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/sersync+rsync%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5/</id>
    <published>2020-10-16T03:41:31.483Z</published>
    <updated>2020-10-16T03:27:35.293Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;&lt;del&gt;~&lt;/del&gt;&lt;br&gt;前言：&lt;br&gt;一、为什么要用Rsync+sersync架构?&lt;br&gt;1、sersync是基于Inotify开发的，类似于Inotify-tools的工具&lt;br&gt;2、sersync可以记录下被监听目录中发生变化的（包括增加、删除、修改）具体某一</summary>
        
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/rsync%E9%85%8D%E7%BD%AE/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/rsync%E9%85%8D%E7%BD%AE/</id>
    <published>2020-10-16T03:41:31.481Z</published>
    <updated>2020-10-16T03:27:24.340Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install rsync -y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~~~~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 配置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;mkdir -p /nfsbackup&lt;br&gt;useradd rsync -M /sbin/nologin -s&lt;br&gt;chown  -R rsync.rsync /nfsbackup&lt;/p&gt;
&lt;p&gt;#配置文件&lt;br&gt;vim /etc/rsyncd.conf&lt;br&gt;###rsyncd.conf start##&lt;br&gt;uid = rsync&lt;br&gt;gid = rsync&lt;br&gt;use chroot = no&lt;br&gt;max connections = 200&lt;br&gt;timeout = 300&lt;br&gt;pid file = /var/run/rsyncd.pid&lt;br&gt;lock file = /var/run/rsync.lock&lt;br&gt;log file = /var/log/rsyncd.log&lt;br&gt;ignore errors&lt;br&gt;read only = false&lt;br&gt;list = false&lt;br&gt;hosts allow = 172.16.1.0/24&lt;br&gt;hosts deny = 0.0.0.0/32&lt;br&gt;auth users = rsync_backup&lt;br&gt;secrets file = /etc/rsync.password&lt;/p&gt;
&lt;p&gt;[backup]&lt;br&gt;path = /backup&lt;br&gt;[nfsbackup]&lt;br&gt;path = /nfsbackup&lt;br&gt;##rsync_config__________end&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/rsync%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/rsync%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B/</id>
    <published>2020-10-16T03:41:31.480Z</published>
    <updated>2020-10-16T03:27:29.184Z</updated>
    
    
    <summary type="html">&lt;p&gt;&lt;del&gt;~&lt;/del&gt;&lt;br&gt;1、搭建备份服务器（backup服务器之rsync服务）&lt;br&gt;工具：Rsync&lt;br&gt;能实现本地和远程的服务器&lt;/p&gt;
&lt;p&gt;rsync 保持属性复制&lt;br&gt;rsync vzrtopg /etc/hosts /mnt/&lt;br&gt;同步功能，删除，和本地同步&lt;br&gt;rsync -avz –delete /tmp1/ /mnt/&lt;/p&gt;
&lt;p&gt;普通复制，同等于CP&lt;br&gt;rsync -vzrtopg /etc/host/ /tmp    复制（带属性）&lt;br&gt;rsync -avz –delete /etc/host/ /tmp    同步删除（以/tc/host）为原&lt;br&gt;远程复制，复制文件到远端，通过隧道&lt;br&gt;rsync -avz /etc/host -e ‘ssh -p 22’ &lt;a href=&quot;mailto:&amp;#111;&amp;#108;&amp;#x64;&amp;#98;&amp;#111;&amp;#121;&amp;#64;&amp;#x31;&amp;#48;&amp;#x2e;&amp;#48;&amp;#46;&amp;#48;&amp;#46;&amp;#51;&amp;#x31;&quot;&gt;&amp;#111;&amp;#108;&amp;#x64;&amp;#98;&amp;#111;&amp;#121;&amp;#64;&amp;#x31;&amp;#48;&amp;#x2e;&amp;#48;&amp;#46;&amp;#48;&amp;#46;&amp;#51;&amp;#x31;&lt;/a&gt;:/tmp&lt;br&gt;-e使用通信协议，隧道&lt;br&gt;-p保持权限&lt;br&gt;rsync -avz /etc/host -e ‘ssh -p 22’ &lt;a href=&quot;mailto:&amp;#111;&amp;#108;&amp;#100;&amp;#x62;&amp;#111;&amp;#121;&amp;#x40;&amp;#x31;&amp;#x30;&amp;#46;&amp;#48;&amp;#x2e;&amp;#48;&amp;#x2e;&amp;#x33;&amp;#49;&quot;&gt;&amp;#111;&amp;#108;&amp;#100;&amp;#x62;&amp;#111;&amp;#121;&amp;#x40;&amp;#x31;&amp;#x30;&amp;#46;&amp;#48;&amp;#x2e;&amp;#48;&amp;#x2e;&amp;#x33;&amp;#49;&lt;/a&gt;:/tmp ssh key    免密钥，一班用于定时任务&lt;br&gt;服务端配置文件&lt;br&gt;/etc/rsyncd.conf,默认是不存在，需要创建&lt;/p&gt;
&lt;p&gt;#rsync_config__________________start&lt;br&gt;#created by oldboy 15:01 2007-6-5&lt;br&gt;#QQ&lt;br&gt;###rsyncd.conf start##&lt;br&gt;uid = rsync&lt;br&gt;gid = rsync&lt;br&gt;use chroot = no&lt;br&gt;max connections = 200&lt;br&gt;timeout = 300&lt;br&gt;pid file = /var/run/rsyncd.pid&lt;br&gt;lock file = /var/run/rsync.lock&lt;br&gt;log file = /var/log/rsyncd.log&lt;br&gt;[backup]&lt;br&gt;path = /backup&lt;br&gt;ignore errors&lt;br&gt;read only = false&lt;br&gt;list = false&lt;br&gt;hosts allow = 172.16.1.0/24    #允许连接的IP，一般是内网&lt;br&gt;hosts deny = 0.0.0.0/32    #拒绝连接的IP&lt;br&gt;auth users = rsync_backup&lt;br&gt;secrets file = /etc/rsync.password&lt;br&gt;#rsync_config__________end&lt;br&gt;########################################&lt;/p&gt;
&lt;p&gt;添加用户&lt;br&gt;useradd rsync -s /sbin/nologin -M    虚拟用户&lt;br&gt;启动服务&lt;br&gt;rsync –daemon&lt;br&gt;查看是否启动&lt;br&gt;ps -ef|grep rsync|grep -v grep&lt;br&gt;创建目录&lt;br&gt;mkdir /backup&lt;br&gt;改变backup权限&lt;br&gt;chown rsync.rsync /backup/&lt;br&gt;查看文件有没有&lt;br&gt;ll /etc/rsync.password&lt;br&gt;如果没有泽创建文件&lt;br&gt;touch /etc/rsync.password&lt;br&gt;编辑文件&lt;br&gt;rsync_backup:oldboy#用户名：密码&lt;br&gt;然后更改权限&lt;br&gt;chmod 600 /etc/rsync.password&lt;br&gt;查看端口&lt;br&gt;lsof -i 873&lt;br&gt;netstat -lntup|grep 873&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
</feed>
