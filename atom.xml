<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>苏国伟</title>
  
  
  <link href="https://sugw.github.io/sugw.github.io/atom.xml" rel="self"/>
  
  <link href="https://sugw.github.io/sugw.github.io/"/>
  <updated>2021-01-13T10:41:00.293Z</updated>
  <id>https://sugw.github.io/sugw.github.io/</id>
  
  <author>
    <name>苏国伟</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>LVS NAT,DR,TUN三种负载原理</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/13/LVS%20NAT,DR,TUN%E4%B8%89%E7%A7%8D%E8%B4%9F%E8%BD%BD%E5%8E%9F%E7%90%86/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/13/LVS%20NAT,DR,TUN%E4%B8%89%E7%A7%8D%E8%B4%9F%E8%BD%BD%E5%8E%9F%E7%90%86/</id>
    <published>2021-01-13T10:18:49.394Z</published>
    <updated>2021-01-13T10:41:00.293Z</updated>
    
    
    <summary type="html">&lt;h3 id=&quot;负载均衡简单介绍&quot;&gt;&lt;a href=&quot;#负载均衡简单介绍&quot; class=&quot;headerlink&quot; title=&quot;负载均衡简单介绍&quot;&gt;&lt;/a&gt;负载均衡简单介绍&lt;/h3&gt;&lt;p&gt;用通俗的话来说负载均衡，就是通过不同的调度机制将用户的请求分派到后端不同的服务器。缓解服务器的请求压力，实现负载均衡的方案有多种，下面简单说说了解的几种方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DNS 负载：利用DNS的解析可以实现区域的性用户请求负载，这种负载方式是离用户最近的负载方案，请求还没有到达内部系统架构服务前就已经被分流了。&lt;/li&gt;
&lt;li&gt;LVS ：就是本篇文件要整理的解决方案，LVS性能特别强，它是工作在linux系统内核的一个程序，LVS负载的特点是超强的分流功能，但它只能负载调度流量的去向，没有办法实现在业务层分流负载。&lt;/li&gt;
&lt;li&gt;Haproxy：haproxy可以工作在ISO7层模型中的4层和7层，工作在4层时是基于IP的负载，这与LVS作用相同，工作在7层时是基于应用层的应用协议进行负载，可以根据分析报文内容并结合算法来选择后端服务&lt;/li&gt;
&lt;li&gt;Nginx： nginx也是应用层负载均衡器，可以实现反向代理功能，nginx的特点是可以将请求按照业务类型进行向后端调度，对请求从业务功能上进行了负载调度。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;lVS工作组成&quot;&gt;&lt;a href=&quot;#lVS工作组成&quot; class=&quot;headerlink&quot; title=&quot;lVS工作组成&quot;&gt;&lt;/a&gt;lVS工作组成&lt;/h3&gt;&lt;p&gt;LVS由两部分组成，包括ipvs和ipvsadm：&lt;/p&gt;</summary>
    
    
    
    <category term="负载均衡" scheme="https://sugw.github.io/sugw.github.io/categories/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    
    
    <category term="lvs" scheme="https://sugw.github.io/sugw.github.io/tags/lvs/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/13/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/13/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/</id>
    <published>2021-01-13T10:15:30.597Z</published>
    <updated>2021-01-13T10:15:30.597Z</updated>
    
    
    <summary type="html">&lt;p&gt;title: lvs原理详解&lt;/p&gt;
&lt;p&gt;tags: lvs&lt;/p&gt;
&lt;p&gt;Catecsges:&lt;/p&gt;
&lt;h3 id=&quot;负载均衡简单介绍&quot;&gt;&lt;a href=&quot;#负载均衡简单介绍&quot; class=&quot;headerlink&quot; title=&quot;负载均衡简单介绍&quot;&gt;&lt;/a&gt;负载均衡简单介绍&lt;/h3&gt;&lt;p&gt;用通俗的话来说负载均衡，就是通过不同的调度机制将用户的请求分派到后端不同的服务器。缓解服务器的请求压力，实现负载均衡的方案有多种，下面简单说说了解的几种方式：&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>l2tp+ppp+ipsec</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/13/l2tp+ppp+ipsec/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/13/l2tp+ppp+ipsec/</id>
    <published>2021-01-13T07:19:02.041Z</published>
    <updated>2021-01-13T07:37:11.400Z</updated>
    
    
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;疫情期间，公司呼吁大家家里办公，家里办公需要连接vpn到公司内部网络，公司办公人员较多，环境较复杂，所以vpn需要支持mac、win、ios、Android系统&lt;/p&gt;
&lt;h2 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerlink&quot; title=&quot;环境&quot;&gt;&lt;/a&gt;环境&lt;/h2&gt;&lt;hr&gt;</summary>
    
    
    
    <category term="实战" scheme="https://sugw.github.io/sugw.github.io/categories/%E5%AE%9E%E6%88%98/"/>
    
    
    <category term="vpn" scheme="https://sugw.github.io/sugw.github.io/tags/vpn/"/>
    
  </entry>
  
  <entry>
    <title>nginx location匹配优先级</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20location%20%E5%8C%B9%E9%85%8D%E4%BC%98%E5%85%88%E7%BA%A7/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20location%20%E5%8C%B9%E9%85%8D%E4%BC%98%E5%85%88%E7%BA%A7/</id>
    <published>2021-01-12T10:25:15.530Z</published>
    <updated>2021-01-12T10:26:05.330Z</updated>
    
    
    <summary type="html">location 顺序优先级
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21


1、表达式的几种形式
~ 表示执行一个正则匹配，区分大小写

~* 表示执行一个正则匹配，不区分大小写

^~ 表示普通字符匹配。使用前缀匹配。如果匹配成功，则不再匹配其他location。

= 进行普通字符精确匹配。也就是完全匹配。

@ 它定义一个命名的 location，使用在内部定向时，例如 error_page, try_files

2、表达式之间的优先级
不同的表达式之间优先级不同，相同的表达式，匹配规则更长的优先级更高。

= 的优先级</summary>
    
    
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx日志格式</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F/</id>
    <published>2021-01-12T10:19:39.722Z</published>
    <updated>2021-01-12T10:27:55.571Z</updated>
    
    
    <summary type="html">nginx json格式日志定义：
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15


log_format json &#39;{ &quot;http_x_forwarded_for&quot;: &quot;$http_x_forwarded_for&quot;, &#39;
                        &#39; &quot;remote_addr&quot;: &quot;$remote_addr&quot;, &#39;
                        &#39;&quot;remote_user&quot;: &quot;$remote_user&quot;, &#39;
                         &#39;&quot;http_user_agent&quot;: &quot;$http_user_</summary>
    
    
    
    <category term="日志" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx 日志切割</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/</id>
    <published>2021-01-12T09:57:10.211Z</published>
    <updated>2021-01-12T10:18:00.278Z</updated>
    
    
    <summary type="html">1
2
3
4
5
6
7
8
9
10
11


#!/bin/bash
declare logs_path=&quot;/workspace/logs/nginx&quot;;
declare need_delete_path=${logs_path}/$(date -d &quot;21 days ago&quot; &quot;+%Y_%m_%d&quot;);
declare yestoday_log_path=${logs_path}/$(date -d &quot;yesterday&quot; &quot;+%Y_%m_%d&quot;);
rm -rf ${need_delete_path}
rm -rf ${yestoday_log_path}
mv ${logs_pat</summary>
    
    
    
    <category term="日志" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx 静态网站缓存</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%BC%93%E5%AD%98/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%BC%93%E5%AD%98/</id>
    <published>2021-01-12T09:37:26.514Z</published>
    <updated>2021-01-12T09:39:57.895Z</updated>
    
    
    <summary type="html">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28


location ~ .*\.(mp3|m4a|ogg|aac|wma|mp4|m4v|mpeg|webm|avi|swf|flv)$
  {
      expires      30d;
  }

  location ~ .*\.(gif|jpg|jpeg|png|bmp|webp|ico)$
  {
      expires      15d;
      access_log off;
  }

  location ~ .*\.</summary>
    
    
    
    <category term="优化" scheme="https://sugw.github.io/sugw.github.io/categories/%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Nginx优化详解</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%E4%BC%98%E5%8C%96/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%E4%BC%98%E5%8C%96/</id>
    <published>2021-01-12T09:01:12.210Z</published>
    <updated>2021-01-12T09:37:02.854Z</updated>
    
    
    <summary type="html">&lt;h3 id=&quot;1、Nginx运行工作进程数量&quot;&gt;&lt;a href=&quot;#1、Nginx运行工作进程数量&quot; class=&quot;headerlink&quot; title=&quot;1、Nginx运行工作进程数量&quot;&gt;&lt;/a&gt;1、Nginx运行工作进程数量&lt;/h3&gt;&lt;p&gt;Nginx运行工作进程个数一般设置CPU的核心或者核心数x2。如果不了解cpu的核数，可以top命令之后按1看出来，也可以查看/proc/cpuinfo文件 grep ^processor /proc/cpuinfo | wc -l&lt;/p&gt;
&lt;figure class=&quot;highlight angelscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@lx~]&lt;/span&gt;# vi/usr/local/nginx1&lt;span class=&quot;number&quot;&gt;.10&lt;/span&gt;/conf/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;worker_processes &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@lx~]&lt;/span&gt;# /usr/local/nginx1&lt;span class=&quot;number&quot;&gt;.10&lt;/span&gt;/sbin/nginx-s reload&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@lx~]&lt;/span&gt;# ps -aux | grep nginx |grep -v grep&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root &lt;span class=&quot;number&quot;&gt;9834&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;47556&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1948&lt;/span&gt; ?     Ss &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: master processnginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www &lt;span class=&quot;number&quot;&gt;10135&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50088&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt; ?       S   &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: worker process&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www &lt;span class=&quot;number&quot;&gt;10136&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50088&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt; ?       S   &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: worker process&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www &lt;span class=&quot;number&quot;&gt;10137&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50088&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt; ?       S   &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: worker process&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www &lt;span class=&quot;number&quot;&gt;10138&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50088&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt; ?       S   &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: worker process&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;2、Nginx运行CPU亲和力&quot;&gt;&lt;a href=&quot;#2、Nginx运行CPU亲和力&quot; class=&quot;headerlink&quot; title=&quot;2、Nginx运行CPU亲和力&quot;&gt;&lt;/a&gt;2、Nginx运行CPU亲和力&lt;/h3&gt;&lt;p&gt;比如4核配置：&lt;/p&gt;</summary>
    
    
    
    <category term="优化" scheme="https://sugw.github.io/sugw.github.io/categories/%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>mysql 删除表数据空间没有释放</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/06/mysql-delete/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/06/mysql-delete/</id>
    <published>2021-01-06T03:41:26.355Z</published>
    <updated>2021-01-07T10:08:21.001Z</updated>
    
    
    <summary type="html">&lt;p&gt;事件起因：&lt;/p&gt;
&lt;p&gt;今天运维人员找我，说我们的数据库磁盘空间满了。于是提供了一些删除表数据的sql给他，让他执行下。&lt;/p&gt;
&lt;p&gt;执行之后，查询数据库，表数据是不在了，但是问题来了。&lt;/p&gt;
&lt;p&gt;磁盘空间并没有释放，这是为啥咧？？？？&lt;/p&gt;
&lt;p&gt;于是乎，上网查找资料，功夫不负有心人，终于找到问题原因：&lt;/p&gt;</summary>
    
    
    
    <category term="数据库" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
  </entry>
  
  <entry>
    <title>Jenkins pipeline 多服务器，多分支发版</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/12/23/Jenkins%20pipeline%20%E5%A4%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%A4%9A%E5%88%86%E6%94%AF%E5%8F%91%E7%89%88/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/12/23/Jenkins%20pipeline%20%E5%A4%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%A4%9A%E5%88%86%E6%94%AF%E5%8F%91%E7%89%88/</id>
    <published>2020-12-23T07:34:21.286Z</published>
    <updated>2021-01-07T10:25:20.718Z</updated>
    
    
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;一个项目部署到多台服务器，通过jenkins自由风格转变成pipeline风格&lt;/p&gt;
&lt;p&gt;发版效果：&lt;/p&gt;
&lt;p&gt;![image-20210107182025504](Jenkins pipeline 多服务器，多分支发版/image-20210107182025504.png)&lt;/p&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="jenkins" scheme="https://sugw.github.io/sugw.github.io/tags/jenkins/"/>
    
  </entry>
  
  <entry>
    <title>开启GTID的情况下导出导入库的注意事项</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/12/17/%E5%BC%80%E5%90%AFGTID%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5%E5%BA%93%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%20/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/12/17/%E5%BC%80%E5%90%AFGTID%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5%E5%BA%93%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%20/</id>
    <published>2020-12-17T02:04:49.059Z</published>
    <updated>2021-01-07T10:11:01.576Z</updated>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;在开启了 GTID 功能的 MySQL 数据库中, 不论是否使用了 GTID 的方式做了主从同步, 导出导入时都需要特别注意数据库中的 GTID 信息.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;导出&quot;&gt;&lt;a href=&quot;#导出&quot; class=&quot;headerlink&quot; title=&quot;导出&quot;&gt;&lt;/a&gt;导出&lt;/h1&gt;&lt;figure class=&quot;highlight routeros&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;➜  mysqldump -uroot -p userdb &amp;gt; userdb.sql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Warning: A partial dump &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; a&lt;span class=&quot;built_in&quot;&gt; server &lt;/span&gt;that has GTIDs will by&lt;span class=&quot;built_in&quot;&gt; default &lt;/span&gt;include the GTIDs of all transactions, even those that changed suppressed parts of the database. &lt;span class=&quot;keyword&quot;&gt;If&lt;/span&gt; you don&lt;span class=&quot;string&quot;&gt;&amp;#x27;t want to restore GTIDs, pass --set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;mysql提示: 当前数据库实例中开启了 GTID 功能, 在开启有 GTID 功能的数据库实例中, 导出其中任何一个库, 如果没有显示地指定&lt;code&gt;--set-gtid-purged&lt;/code&gt;参数, 都会提示这一行信息. 意思是默认情况下, 导出的库中含有 GTID 信息, 如果不想导出包含有 GTID 信息的数据库, 需要显示地添加&lt;code&gt;--set-gtid-purged=OFF&lt;/code&gt;参数. 于是乎, dump 变成了如下样子&lt;/p&gt;
&lt;figure class=&quot;highlight cmake&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;➜ mysqldump -uroot -p --&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;-gtid-purged=&lt;span class=&quot;keyword&quot;&gt;OFF&lt;/span&gt; userdb &amp;gt; userdb.sql&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="数据库" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="mysql" scheme="https://sugw.github.io/sugw.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins-pipeline的创建和参数传递</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/12/08/Jenkins-pipeline%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/12/08/Jenkins-pipeline%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/</id>
    <published>2020-12-08T09:00:19.996Z</published>
    <updated>2021-01-07T10:09:59.935Z</updated>
    
    
    <summary type="html">&lt;h2 id=&quot;一、单分支的pipeline&quot;&gt;&lt;a href=&quot;#一、单分支的pipeline&quot; class=&quot;headerlink&quot; title=&quot;一、单分支的pipeline&quot;&gt;&lt;/a&gt;&lt;strong&gt;一、单分支的pipeline&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;Pipline的特点是可以多节点运行，节点之间可以并行或者串行执行，从而实现编译-部署-部署的持续化构建和发布。&lt;/p&gt;
&lt;p&gt;与自由风格不同的是，我们可以通过编写功能强大的Jenkinsfile脚本，来实现我们所需要的功能，比如：执行shell，执行bat，重试，等待，并行/串行，发邮件，触发其他工程。难点在于需要遵循一定的Groovy语法。有一定的学习成本。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;h4 id=&quot;job的创建&quot;&gt;&lt;a href=&quot;#job的创建&quot; class=&quot;headerlink&quot; title=&quot;job的创建&quot;&gt;&lt;/a&gt;job的创建&lt;/h4&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img src=&quot;/sugw.github.io/2020/12/08/Jenkins-pipeline%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/up-d0c14a7f65815132bf26825168817ae9188.png&quot; class title=&quot;img&quot;&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="自动部署" scheme="https://sugw.github.io/sugw.github.io/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>datagrip</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/12/01/datagrip/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/12/01/datagrip/</id>
    <published>2020-12-01T08:13:10.440Z</published>
    <updated>2021-01-07T10:10:34.974Z</updated>
    
    
    <summary type="html">https://mp.weixin.qq.com/s/DTECLX-Y-9XJEScsA4boDw</summary>
    
    
    
    <category term="激活" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%BF%80%E6%B4%BB/"/>
    
    
    <category term="激活" scheme="https://sugw.github.io/sugw.github.io/tags/%E6%BF%80%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins+Gitlab+Ansible自动化部署(六)</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/11/27/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E5%85%AD)/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/11/27/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E5%85%AD)/</id>
    <published>2020-11-27T02:03:01.705Z</published>
    <updated>2021-01-07T10:09:46.461Z</updated>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;Pipeline Job实现Nginix+MySQL+PHP+Wordpress实现自动化部署交付（Jenkins+Gitlab+Ansible自动化部署（五））&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;环境准备&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;编写ansible playbook脚本实现Wordpress远程部署&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;将wordpress源码与playbook部署脚本提交到gitlab仓库&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;编写pipeline job脚本实现Jenkins流水线持续交付流程&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Jenkins集成Ansible与gitlab实现wordpress的自动化部署&lt;/p&gt;
&lt;p&gt;验证环境&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;登录Jenkins主机&lt;/p&gt;
&lt;figure class=&quot;highlight angelscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;xueji@&lt;/span&gt;xueji MINGW64 ~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ssh &lt;span class=&quot;symbol&quot;&gt;root@&lt;/span&gt;jenkins.example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last login: Thu Jan &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;41&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;49&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2019&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.244&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@jenkins ~]&lt;/span&gt;# su - deploy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last login: Wed Jan  &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;43&lt;/span&gt; CST &lt;span class=&quot;number&quot;&gt;2019&lt;/span&gt; on pts/&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[deploy@jenkins ~]&lt;/span&gt;$ source /home/deploy/.py3-a2&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;-env/bin/activate           (.py3-a2&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;-env) [&lt;span class=&quot;symbol&quot;&gt;deploy@&lt;/span&gt;jenkins ~]$ source /home/deploy/.py3-a2&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;-env/ansible/hacking/env-setup -q&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(.py3-a2&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;-env) [&lt;span class=&quot;symbol&quot;&gt;deploy@&lt;/span&gt;jenkins ~]$ ansible-playbook --version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ansible-playbook &lt;span class=&quot;number&quot;&gt;2.5&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.14&lt;/span&gt; (stable&lt;span class=&quot;number&quot;&gt;-2.5&lt;/span&gt; c748512c4c) last updated &lt;span class=&quot;number&quot;&gt;2019&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;01&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;03&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;39&lt;/span&gt; (GMT +&lt;span class=&quot;number&quot;&gt;800&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  config file = None&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  configured module search path = [&lt;span class=&quot;string&quot;&gt;&amp;#x27;/home/deploy/.ansible/plugins/modules&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;#x27;/usr/share/ansible/plugins/modules&amp;#x27;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ansible python module location = /home/deploy/.py3-a2&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;-env/ansible/lib/ansible&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  executable location = /home/deploy/.py3-a2&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;-env/ansible/bin/ansible-playbook&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  python version = &lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.8&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;, Jan  &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2019&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;19&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;) [GCC &lt;span class=&quot;number&quot;&gt;4.8&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;20150623&lt;/span&gt; (Red Hat &lt;span class=&quot;number&quot;&gt;4.8&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-36&lt;/span&gt;)]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(.py3-a2&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;-env) [&lt;span class=&quot;symbol&quot;&gt;deploy@&lt;/span&gt;jenkins ~]$ ssh &lt;span class=&quot;symbol&quot;&gt;root@&lt;/span&gt;test.example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last login: Thu Jan &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;04&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2019&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;192.168&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.244&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.131&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@test ~]&lt;/span&gt;# hostname&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;test.example.com&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;登录Jenkins web管理页&lt;/p&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="自动部署" scheme="https://sugw.github.io/sugw.github.io/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins+Gitlab+Ansible自动化部署(五)</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/11/27/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%BA%94)/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/11/27/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%BA%94)/</id>
    <published>2020-11-27T01:59:28.622Z</published>
    <updated>2021-01-07T10:09:30.609Z</updated>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;Freestyle Job实现静态网站部署交付（接Jenkins+Gitlab+Ansible自动化部署（四&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;环境构建&lt;/li&gt;
&lt;li&gt;编写ansible playbook脚本实现静态网页远程部署&lt;/li&gt;
&lt;li&gt;将playbook部署脚本提交到GitLab仓库&lt;/li&gt;
&lt;li&gt;构建Freestyle Job任务框架&lt;/li&gt;
&lt;li&gt;Jenkins集成Ansible与Gitlab实现静态网页的自动化部署&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;首先确定自己的环境已经准备完毕。&lt;/p&gt;
&lt;p&gt;登录gitlab查看&lt;/p&gt;
&lt;img src=&quot;/sugw.github.io/2020/11/27/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%BA%94)/804543-20190110114757705-2039134505.png&quot; class title=&quot;img&quot;&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="自动部署" scheme="https://sugw.github.io/sugw.github.io/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins+Gitlab+Ansible自动化部署(四)</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E5%9B%9B)/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E5%9B%9B)/</id>
    <published>2020-11-26T11:08:52.453Z</published>
    <updated>2021-01-07T10:09:36.190Z</updated>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;Jenkins应用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Jenkins Linux Shell集成&lt;/p&gt;
&lt;p&gt;登录Jenkins web管理页，点击新建任务&lt;/p&gt;
&lt;img src=&quot;/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E5%9B%9B)/804543-20190109151723046-524146976-20201127095232069.png&quot; class title=&quot;img&quot;&gt;

&lt;p&gt;添加描述信息&lt;/p&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="自动部署" scheme="https://sugw.github.io/sugw.github.io/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins+Gitlab+Ansible自动化部署(三)</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%B8%89)/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%B8%89)/</id>
    <published>2020-11-26T10:54:18.246Z</published>
    <updated>2021-01-07T10:09:41.057Z</updated>
    
    
    <summary type="html">&lt;p&gt;接Jenkins+Gitlab+Ansible自动化部署（一）&lt;a href=&quot;https://www.cnblogs.com/zd520pyx1314/p/10210727.html&quot;&gt;https://www.cnblogs.com/zd520pyx1314/p/10210727.html&lt;/a&gt; 和（二）&lt;a href=&quot;https://www.cnblogs.com/zd520pyx1314/p/10213549.html&quot;&gt;https://www.cnblogs.com/zd520pyx1314/p/10213549.html &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Jenkins是一个开源持续集成工具，提供了软甲你开发的持续集成服务，支持主流软件配置管理，配合实现软件配置管理，持续集成功能。是主流的运维开发平台，兼容所有主流开发环境，插件市场可与海量业内主流开发工具实现集成，Job为配置单位与日志管理，使运维与开发人员能协同工作。丰富的权限管理划分不同Job不同角色；强大的负载均衡功能，保证我们项目的可靠性。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jenkins的安装、配置与管理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;添加Jenkins yum仓库&lt;/p&gt;
&lt;figure class=&quot;highlight awk&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;官网地址&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https:&lt;span class=&quot;regexp&quot;&gt;//&lt;/span&gt;pkg.jenkins.io&lt;span class=&quot;regexp&quot;&gt;/redhat-stable/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="自动部署" scheme="https://sugw.github.io/sugw.github.io/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins+Gitlab+Ansible自动化部署(二)</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%BA%8C)/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%BA%8C)/</id>
    <published>2020-11-26T10:47:07.196Z</published>
    <updated>2021-01-07T10:09:51.561Z</updated>
    
    
    <summary type="html">&lt;p&gt;接Jenkins+Gitlab+Ansbile自动化部署(一):&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%B8%80)/&quot;&gt;https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%B8%80)/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ansible的配置与部署&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;工具名称&lt;/th&gt;
&lt;th&gt;介绍&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;Chef&lt;/td&gt;
&lt;td&gt;采用Ruby编写，C/S架构，配置需要Git依赖，Recipe脚本编写规范，需要良好的编程经验。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ansible&lt;/td&gt;
&lt;td&gt;采用Python编写，无Client，模块化配置管理，Playbook脚本编写规范，易于上手，适合中小规模快速部署。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Saltstack&lt;/td&gt;
&lt;td&gt;采用Python编写，C/S架构，模块化配置管理，YAML脚本编写规范，内置异步文件服务器可以为客户端文件加快服务速度，适合大规模集群部署，但是需要安装客户端。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;Ansible的优势和应用场景&lt;/p&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="自动部署" scheme="https://sugw.github.io/sugw.github.io/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins+Gitlab+Ansible自动化部署(一)</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%B8%80)/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/11/26/Jenkins+Gitlab+Ansible%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2(%E4%B8%80)/</id>
    <published>2020-11-26T10:33:50.167Z</published>
    <updated>2021-01-07T10:09:22.851Z</updated>
    
    
    <summary type="html">&lt;h2 id=&quot;首先准备实验环境&quot;&gt;&lt;a href=&quot;#首先准备实验环境&quot; class=&quot;headerlink&quot; title=&quot;首先准备实验环境&quot;&gt;&lt;/a&gt;首先准备实验环境&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;虚拟机&lt;/th&gt;
&lt;th&gt;主机名&lt;/th&gt;
&lt;th&gt;IP地址&lt;/th&gt;
&lt;th&gt;服务&lt;/th&gt;
&lt;th&gt;系统版本&lt;/th&gt;
&lt;th&gt;内核版本&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;Vmware Workstation 14&lt;/td&gt;
&lt;td&gt;gitlab.example.com&lt;/td&gt;
&lt;td&gt;20.10.1.249&lt;/td&gt;
&lt;td&gt;gitlab&lt;/td&gt;
&lt;td&gt;CentOS Linux release 7.5.1804 (Core)&lt;/td&gt;
&lt;td&gt;3.10.0-862.el7.x86_64&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;jenkins.example.com&lt;/td&gt;
&lt;td&gt;192.168.244.131&lt;/td&gt;
&lt;td&gt;jenkis&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ansible.example.com&lt;/td&gt;
&lt;td&gt;192.168.244.132&lt;/td&gt;
&lt;td&gt;asible&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h2 id=&quot;hosts解析&quot;&gt;&lt;a href=&quot;#hosts解析&quot; class=&quot;headerlink&quot; title=&quot;hosts解析&quot;&gt;&lt;/a&gt;hosts解析&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;20.10.1.249 gitlab.example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192.168.244.131 jenkins.example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192.168.244.132 ansible.example.com&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;关闭防火墙和selinux&quot;&gt;&lt;a href=&quot;#关闭防火墙和selinux&quot; class=&quot;headerlink&quot; title=&quot;关闭防火墙和selinux&quot;&gt;&lt;/a&gt;关闭防火墙和selinux&lt;/h2&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="自动部署" scheme="https://sugw.github.io/sugw.github.io/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Prometheus-pushgateway</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/11/23/prometheus-pushgateway/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/11/23/prometheus-pushgateway/</id>
    <published>2020-11-23T10:09:28.267Z</published>
    <updated>2020-11-24T06:47:30.676Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;一、Pushgateway-简介&quot;&gt;&lt;a href=&quot;#一、Pushgateway-简介&quot; class=&quot;headerlink&quot; title=&quot;一、Pushgateway 简介&quot;&gt;&lt;/a&gt;一、Pushgateway 简介&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/prometheus/pushgateway&quot;&gt;Pushgateway&lt;/a&gt; 是 Prometheus 生态中一个重要工具，使用它的原因主要是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Prometheus 采用 pull 模式，可能由于不在一个子网或者防火墙原因，导致 Prometheus 无法直接拉取各个 target 数据。&lt;/li&gt;
&lt;li&gt;在监控业务数据的时候，需要将不同数据汇总, 由 Prometheus 统一收集。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;由于以上原因，不得不使用 pushgateway，但在使用之前，有必要了解一下它的一些弊端：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;将多个节点数据汇总到 pushgateway, 如果 pushgateway 挂了，受影响比多个 target 大。&lt;/li&gt;
&lt;li&gt;Prometheus 拉取状态 &lt;code&gt;up&lt;/code&gt; 只针对 pushgateway, 无法做到对每个节点有效。&lt;/li&gt;
&lt;li&gt;Pushgateway 可以持久化推送给它的所有监控数据。&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="监控" scheme="https://sugw.github.io/sugw.github.io/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
    <category term="prometheus" scheme="https://sugw.github.io/sugw.github.io/tags/prometheus/"/>
    
  </entry>
  
</feed>
