<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>一只小笨鸟</title>
  
  
  <link href="https://sugw.github.io/sugw.github.io/atom.xml" rel="self"/>
  
  <link href="https://sugw.github.io/sugw.github.io/"/>
  <updated>2020-10-20T09:06:44.719Z</updated>
  <id>https://sugw.github.io/sugw.github.io/</id>
  
  <author>
    <name>guowei su</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/20/hello-world/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/20/hello-world/</id>
    <published>2020-10-20T09:06:44.719Z</published>
    <updated>2020-10-20T09:06:44.719Z</updated>
    
    
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://localhost:4000/sugw.github.io/tags/&quot;&gt;http://localhost:4000/sugw.github.io/tags/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&amp;quot;My New Post&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;</summary>
    
    
    
    <category term="测试" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="标签1" scheme="https://sugw.github.io/sugw.github.io/tags/%E6%A0%87%E7%AD%BE1/"/>
    
    <category term="标签2" scheme="https://sugw.github.io/sugw.github.io/tags/%E6%A0%87%E7%AD%BE2/"/>
    
  </entry>
  
  <entry>
    <title>测试typora</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/20/%E4%B8%80%E7%BA%A7%E6%A0%87%E9%A2%98/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/20/%E4%B8%80%E7%BA%A7%E6%A0%87%E9%A2%98/</id>
    <published>2020-10-20T02:43:25.861Z</published>
    <updated>2020-10-20T08:58:54.862Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;一级标题&quot;&gt;&lt;a href=&quot;#一级标题&quot; class=&quot;headerlink&quot; title=&quot;一级标题&quot;&gt;&lt;/a&gt;一级标题&lt;/h1&gt;&lt;h2 id=&quot;二级标题&quot;&gt;&lt;a href=&quot;#二级标题&quot; class=&quot;headerlink&quot; title=&quot;二级标题&quot;&gt;&lt;/a&gt;二级标题&lt;/h2&gt;&lt;h3 id=&quot;三级标题&quot;&gt;&lt;a href=&quot;#三级标题&quot; class=&quot;headerlink&quot; title=&quot;三级标题&quot;&gt;&lt;/a&gt;三级标题&lt;/h3&gt;&lt;h6 id=&quot;主题&quot;&gt;&lt;a href=&quot;#主题&quot; class=&quot;headerlink&quot; title=&quot;主题&quot;&gt;&lt;/a&gt;主题&lt;/h6&gt;&lt;hr&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;!--统计--&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</summary>
    
    
    
    <category term="测试" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%B5%8B%E8%AF%95/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/nfs/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/nfs/</id>
    <published>2020-10-16T03:41:32.822Z</published>
    <updated>2020-10-16T03:27:17.372Z</updated>
    
    
    <summary type="html">&lt;p&gt;mount -t nfs 172.16.1.31:/data/172.16.1.8 /application/nginx/html/www/wp-content/uploads&lt;/p&gt;
&lt;p&gt;/data 172.16.1.0/24(rw,sync,all_squash,anonuid=1025,anongid=1025)&lt;/p&gt;
</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/nfs%E6%90%AD%E5%BB%BA/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/nfs%E6%90%AD%E5%BB%BA/</id>
    <published>2020-10-16T03:41:32.819Z</published>
    <updated>2020-10-16T03:27:31.214Z</updated>
    
    
    <summary type="html">&lt;p&gt;&lt;del&gt;~&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;搭建环境&lt;br&gt;安装基础软件&lt;br&gt;yum install lrzsz nmap tree dos2unix nc -y&lt;br&gt;打补丁&lt;br&gt;yum update或者yum up grade&lt;br&gt;安装&lt;br&gt;yum install nfs-utils rpcbind -y&lt;br&gt;启动RPC&lt;br&gt;systemctl start rpcbind.service&lt;br&gt;查看RPc中的启动服务&lt;br&gt;rpcinfo -p localhost&lt;br&gt;启动nfs&lt;br&gt;systemctl start nfs.service&lt;br&gt;查看rpc中的服务&lt;br&gt;rpcinfo -p localhost&lt;br&gt;RPC端口：111&lt;br&gt;查看端口&lt;br&gt;netstat -lntup|grep rpcbind&lt;br&gt;lsof -i :rpcbind&lt;br&gt;查看rpc中的服务&lt;br&gt;rpcinfo -p localhost&lt;br&gt;启动nfs&lt;br&gt;/etc/init.d/nfs&lt;/p&gt;
&lt;p&gt;nfs配置文件&lt;br&gt;/etc/exports&lt;br&gt;rsync配置文件&lt;br&gt;/etc/rsyncd.conf&lt;/p&gt;
&lt;p&gt;每个程序都有一个虚拟用户，nfs虚拟用户是:&lt;br&gt;nfsnobody&lt;br&gt;创建nfs目录&lt;br&gt;mkdir /data -p&lt;br&gt;赋予nfs程序能读写权限&lt;br&gt;chown nfsnobody.nfsnobody /data&lt;br&gt;编辑nfs服务器配置文件&lt;br&gt;vim /etc/exports&lt;br&gt;注意些注释&lt;br&gt;#sharc /data by oldboy for bingbing at 20180518&lt;br&gt;/data 172.16.1.0/24(rw,sync)#sync是写到磁盘，如果不写则写到内存,async异步写入&lt;br&gt;以上配置需要注意&lt;br&gt;1.先启动rpcbind&lt;br&gt;2.后启动nfs&lt;br&gt;3.查看rpc状态&lt;br&gt;rpcinfo -p localhost&lt;/p&gt;
&lt;p&gt;重启nfs&lt;br&gt;/etc/init.d/nfs reload    平滑重启，已经到达服务器的请求处理完毕，没有到达的则就屏蔽掉&lt;br&gt;/etc/init.d/nfs reload ===pxportfs -rv&lt;/p&gt;
&lt;p&gt;客户端配置：&lt;br&gt;安装软件：&lt;br&gt;yum install lrzsz nmap tree dos2unix nc -y&lt;br&gt;yum install nfs-utils rpcbind -y&lt;br&gt;启动并且开机启动rpc服务&lt;br&gt;systemctl start rpcbind.service&lt;br&gt;systemctl enable rpcbind.service&lt;br&gt;挂在&lt;br&gt;先检查&lt;br&gt;showmount -e 172.16.1.31或者&lt;br&gt;telnet 172.16.1.31 111&lt;br&gt;挂载&lt;br&gt;mount -t nfs 172.16.1.31:/data /mnt&lt;br&gt;检查&lt;br&gt;df -h&lt;br&gt;cd /mnt&lt;br&gt;touch oldboy.txt&lt;/p&gt;
&lt;p&gt;查看服务器挂在目录的权限,设置目录权限为nfsnobody&lt;br&gt;chown nfsnobody.nfsnobody /mnt&lt;/p&gt;
&lt;p&gt;把挂在命令放到rc.local里&lt;br&gt;echo “mount -t nfs 172,16.1.31:/data /mnt” &amp;gt;&amp;gt;/etc/rc.local&lt;br&gt;tail -1 /etc/rc.local&lt;br&gt;提示：也可以放入/etc/fstab&lt;/p&gt;
&lt;p&gt;/etc/fstab是在网卡还没有启动的时候加载，如果把nfs挂在写到着里面会卡住&lt;/p&gt;
&lt;p&gt;所有机器&lt;br&gt;useradd -u 888 zuma -s /sbin/nologin -M&lt;br&gt;chown -R zuma.zuma /data1&lt;br&gt;mount -t nfs 172.16.1.31:/data /opt&lt;br&gt;df -h&lt;br&gt;nfs开机启动挂载以下操作，需要开启netfs&lt;br&gt;vim /etc/fstab&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/sersync%E5%AE%89%E8%A3%85/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/sersync%E5%AE%89%E8%A3%85/</id>
    <published>2020-10-16T03:41:31.486Z</published>
    <updated>2020-10-20T09:00:32.094Z</updated>
    
    
    <summary type="html">&lt;pre&gt;&lt;code&gt;1.下载工具
2.解压工具，规整目录
mkdir /application -p
mv sersync2.5.4_64bit_binary_stable_final.tar.gz /application/
cd application/
tar zxvf sersync2.5.4_64bit_binary_stable_final.tar.gz
rm -f sersync2.5.4_64bit_binary_stable_final.tar.gz
cp -a GNU-Linux-x86 sersync
cd sersync/
mkdir    conf logs bin
mv /bin/sersync2 bin/
mv confxml.xml conf/
mv bin/sersync2 bin/sersync 


编辑配置文件
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;ISO-8859-1&amp;quot;?&amp;gt;
&amp;lt;head version=&amp;quot;2.5&amp;quot;&amp;gt;
    &amp;lt;host hostip=&amp;quot;localhost&amp;quot; port=&amp;quot;8008&amp;quot;&amp;gt;&amp;lt;/host&amp;gt;
    &amp;lt;debug start=&amp;quot;false&amp;quot;/&amp;gt;
    &amp;lt;fileSystem xfs=&amp;quot;false&amp;quot;/&amp;gt;
    &amp;lt;filter start=&amp;quot;false&amp;quot;&amp;gt;
    &amp;lt;exclude expression=&amp;quot;(.*)\.svn&amp;quot;&amp;gt;&amp;lt;/exclude&amp;gt;
    &amp;lt;exclude expression=&amp;quot;(.*)\.gz&amp;quot;&amp;gt;&amp;lt;/exclude&amp;gt;
    &amp;lt;exclude expression=&amp;quot;^info/*&amp;quot;&amp;gt;&amp;lt;/exclude&amp;gt;
    &amp;lt;exclude expression=&amp;quot;^static/*&amp;quot;&amp;gt;&amp;lt;/exclude&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;inotify&amp;gt;
    &amp;lt;delete start=&amp;quot;true&amp;quot;/&amp;gt;
    &amp;lt;createFolder start=&amp;quot;true&amp;quot;/&amp;gt;
    &amp;lt;createFile start=&amp;quot;false&amp;quot;/&amp;gt;
    &amp;lt;closeWrite start=&amp;quot;true&amp;quot;/&amp;gt;
    &amp;lt;moveFrom start=&amp;quot;true&amp;quot;/&amp;gt;
    &amp;lt;moveTo start=&amp;quot;true&amp;quot;/&amp;gt;
    &amp;lt;attrib start=&amp;quot;false&amp;quot;/&amp;gt;
    &amp;lt;modify start=&amp;quot;false&amp;quot;/&amp;gt;
    &amp;lt;/inotify&amp;gt;

    &amp;lt;sersync&amp;gt;
    &amp;lt;localpath watch=&amp;quot;/data&amp;quot;&amp;gt;    #同步的目录
        &amp;lt;remote ip=&amp;quot;172.16.1.41&amp;quot; name=&amp;quot;nfsbackup&amp;quot;/&amp;gt; #目标IP和模块
        &amp;lt;!--&amp;lt;remote ip=&amp;quot;192.168.8.39&amp;quot; name=&amp;quot;tongbu&amp;quot;/&amp;gt;--&amp;gt;
        &amp;lt;!--&amp;lt;remote ip=&amp;quot;192.168.8.40&amp;quot; name=&amp;quot;tongbu&amp;quot;/&amp;gt;--&amp;gt;
    &amp;lt;/localpath&amp;gt;
    &amp;lt;rsync&amp;gt;
        &amp;lt;commonParams params=&amp;quot;-avz&amp;quot;/&amp;gt;    #Rsync同步参数
        &amp;lt;auth start=&amp;quot;true&amp;quot; users=&amp;quot;rsync_backup&amp;quot; passwordfile=&amp;quot;/etc/rsync.password&amp;quot;/&amp;gt;#用户名密码
        &amp;lt;userDefinedPort start=&amp;quot;false&amp;quot; port=&amp;quot;874&amp;quot;/&amp;gt;&amp;lt;!-- port=874 --&amp;gt;
        &amp;lt;timeout start=&amp;quot;true&amp;quot; time=&amp;quot;100&amp;quot;/&amp;gt;&amp;lt;!-- timeout=100 --&amp;gt;##超时时间
        &amp;lt;ssh start=&amp;quot;false&amp;quot;/&amp;gt;
    &amp;lt;/rsync&amp;gt;
    &amp;lt;failLog path=&amp;quot;/application/logs/rsync_fail_log.sh&amp;quot; timeToExecute=&amp;quot;60&amp;quot;/&amp;gt;&amp;lt;!--default every 60mins execute once--&amp;gt;#日志存储位置
    &amp;lt;crontab start=&amp;quot;false&amp;quot; schedule=&amp;quot;600&amp;quot;&amp;gt;&amp;lt;!--600mins--&amp;gt;
        &amp;lt;crontabfilter start=&amp;quot;false&amp;quot;&amp;gt;
        &amp;lt;exclude expression=&amp;quot;*.php&amp;quot;&amp;gt;&amp;lt;/exclude&amp;gt;
        &amp;lt;exclude expression=&amp;quot;info/*&amp;quot;&amp;gt;&amp;lt;/exclude&amp;gt;
        &amp;lt;/crontabfilter&amp;gt;
    &amp;lt;/crontab&amp;gt;
    &amp;lt;plugin start=&amp;quot;false&amp;quot; name=&amp;quot;command&amp;quot;/&amp;gt;
    &amp;lt;/sersync&amp;gt;

    &amp;lt;plugin name=&amp;quot;command&amp;quot;&amp;gt;
    &amp;lt;param prefix=&amp;quot;/bin/sh&amp;quot; suffix=&amp;quot;&amp;quot; ignoreError=&amp;quot;true&amp;quot;/&amp;gt;    &amp;lt;!--prefix /opt/tongbu/mmm.sh suffix--&amp;gt;
    &amp;lt;filter start=&amp;quot;false&amp;quot;&amp;gt;
        &amp;lt;include expression=&amp;quot;(.*)\.php&amp;quot;/&amp;gt;
        &amp;lt;include expression=&amp;quot;(.*)\.sh&amp;quot;/&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;/plugin&amp;gt;

    &amp;lt;plugin name=&amp;quot;socket&amp;quot;&amp;gt;
    &amp;lt;localpath watch=&amp;quot;/opt/tongbu&amp;quot;&amp;gt;
        &amp;lt;deshost ip=&amp;quot;192.168.138.20&amp;quot; port=&amp;quot;8009&amp;quot;/&amp;gt;
    &amp;lt;/localpath&amp;gt;
    &amp;lt;/plugin&amp;gt;
    &amp;lt;plugin name=&amp;quot;refreshCDN&amp;quot;&amp;gt;
    &amp;lt;localpath watch=&amp;quot;/data0/htdocs/cms.xoyo.com/site/&amp;quot;&amp;gt;
        &amp;lt;cdninfo domainname=&amp;quot;ccms.chinacache.com&amp;quot; port=&amp;quot;80&amp;quot; username=&amp;quot;xxxx&amp;quot; passwd=&amp;quot;xxxx&amp;quot;/&amp;gt;
        &amp;lt;sendurl base=&amp;quot;http://pic.xoyo.com/cms&amp;quot;/&amp;gt;
        &amp;lt;regexurl regex=&amp;quot;false&amp;quot; match=&amp;quot;cms.xoyo.com/site([/a-zA-Z0-9]*).xoyo.com/images&amp;quot;/&amp;gt;
    &amp;lt;/localpath&amp;gt;
    &amp;lt;/plugin&amp;gt;
&amp;lt;/head&amp;gt;

程序加执行命令
chmod +x bin/sersync
查看参数
/application/sersync/bin/sersync -h
执行sersycn
/application/sersync/bin/sersync -d -r -n 8 -o /application/sersync/conf/confxml.xml
测试
加入到开机启动
/application/sersync/bin/sersync -d -r -n 8 -o /application/sersync/conf/confxml.xml&lt;/code&gt;&lt;/pre&gt;
</summary>
    
    
    
    <category term="文件服务" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/"/>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/sersync+rsync%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/sersync+rsync%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5/</id>
    <published>2020-10-16T03:41:31.483Z</published>
    <updated>2020-10-16T03:27:35.293Z</updated>
    
    
    <summary type="html">&lt;p&gt;&lt;del&gt;~&lt;/del&gt;&lt;br&gt;前言：&lt;br&gt;一、为什么要用Rsync+sersync架构?&lt;br&gt;1、sersync是基于Inotify开发的，类似于Inotify-tools的工具&lt;br&gt;2、sersync可以记录下被监听目录中发生变化的（包括增加、删除、修改）具体某一个文件或某一个目录的名字，然后使用rsync同步的时候，只同步发生变化的这个文件或者这个目录。&lt;br&gt;二、Rsync+Inotify-tools与Rsync+sersync这两种架构有什么区别？&lt;br&gt;1、Rsync+Inotify-tools&lt;br&gt;（1）：Inotify-tools只能记录下被监听的目录发生了变化（包括增加、删除、修改），并没有把具体是哪个文件或者哪个目录发生了变化记录下来；&lt;br&gt;（2）：rsync在同步的时候，并不知道具体是哪个文件或者哪个目录发生了变化，每次都是对整个目录进行同步，当数据量很大时，整个目录同步非常耗时（rsync要对整个目录遍历查找对比文件），因此，效率很低。&lt;br&gt;2、Rsync+sersync&lt;br&gt;（1）：sersync可以记录下被监听目录中发生变化的（包括增加、删除、修改）具体某一个文件或某一个目录的名字；&lt;br&gt;（2）：rsync在同步的时候，只同步发生变化的这个文件或者这个目录（每次发生变化的数据相对整个同步目录数据来说是很小的，rsync在遍历查找比对文件时，速度很快），因此，效率很高。&lt;br&gt;小结：当同步的目录数据量不大时，建议使用Rsync+Inotify-tools；当数据量很大（几百G甚至1T以上）、文件很多时，建议使用Rsync+sersync。&lt;br&gt;说明：&lt;br&gt;操作系统：CentOS 5.X&lt;br&gt;源服务器：192.168.21.129&lt;br&gt;目标服务器：192.168.21.127，192.168.21.128&lt;br&gt;目的：把源服务器上/home/&lt;a href=&quot;http://www.osyunwei.com目录实时同步到目标服务器的/home/www.osyunwei.com%E4%B8%8B&quot;&gt;www.osyunwei.com目录实时同步到目标服务器的/home/www.osyunwei.com下&lt;/a&gt;&lt;br&gt;系统运维  &lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com&lt;/a&gt;  温馨提醒：qihang01原创内容 版权所有,转载请注明出处及原文链接&lt;br&gt;具体操作：&lt;br&gt;第一部分：分别在两台目标服务器192.168.21.127，192.168.21.128上操作&lt;br&gt;一、分别在两台在目标服务器安装Rsync服务端&lt;br&gt;1、关闭SELINUX&lt;br&gt;vi /etc/selinux/config #编辑防火墙配置文件&lt;br&gt;#SELINUX=enforcing #注释掉&lt;br&gt;#SELINUXTYPE=targeted #注释掉&lt;br&gt;SELINUX=disabled #增加&lt;br&gt;:wq! #保存，退出&lt;br&gt;setenforce 0 #立即生效&lt;br&gt;2、开启防火墙tcp 873端口（Rsync默认端口）&lt;br&gt;vi /etc/sysconfig/iptables #编辑防火墙配置文件&lt;br&gt;-A RH-Firewall-1-INPUT -m state –state NEW -m tcp -p tcp –dport 873 -j ACCEPT&lt;br&gt;:wq! #保存退出&lt;br&gt;/etc/init.d/iptables restart #最后重启防火墙使配置生效&lt;br&gt;3、安装Rsync服务端软件&lt;br&gt;yum install rsync xinetd #安装&lt;br&gt;vi /etc/xinetd.d/rsync #编辑配置文件，设置开机启动rsync&lt;br&gt;disable = no #修改为no&lt;br&gt;:wq! #保存退出&lt;br&gt;/etc/init.d/xinetd start #启动（CentOS中是以xinetd来管理Rsync服务的）&lt;br&gt;4、创建rsyncd.conf配置文件&lt;br&gt;vi /etc/rsyncd.conf #创建配置文件，添加以下代码&lt;br&gt;log file = /var/log/rsyncd.log #日志文件位置，启动rsync后自动产生这个文件，无需提前创建&lt;br&gt;pidfile = /var/run/rsyncd.pid  #pid文件的存放位置&lt;br&gt;lock file = /var/run/rsync.lock  #支持max connections参数的锁文件&lt;br&gt;secrets file = /etc/rsync.pass  #用户认证配置文件，里面保存用户名称和密码，后面会创建这个文件&lt;br&gt;motd file = /etc/rsyncd.Motd  #rsync启动时欢迎信息页面文件位置（文件内容自定义）&lt;br&gt;[home_&lt;a href=&quot;http://www.osyunwei.com]&quot;&gt;www.osyunwei.com]&lt;/a&gt; #自定义名称&lt;br&gt;path = /home/&lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com/&lt;/a&gt; #rsync服务端数据目录路径&lt;br&gt;comment = home_&lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com&lt;/a&gt; #模块名称与[home_&lt;a href=&quot;http://www.osyunwei.com]自定义名称相同&quot;&gt;www.osyunwei.com]自定义名称相同&lt;/a&gt;&lt;br&gt;uid = root #设置rsync运行权限为root&lt;br&gt;gid = root #设置rsync运行权限为root&lt;br&gt;port=873  #默认端口&lt;br&gt;use chroot = no #默认为true，修改为no，增加对目录文件软连接的备份&lt;br&gt;read only = no  #设置rsync服务端文件为读写权限&lt;br&gt;list = no #不显示rsync服务端资源列表&lt;br&gt;max connections = 200 #最大连接数&lt;br&gt;timeout = 600  #设置超时时间&lt;br&gt;auth users = home_&lt;a href=&quot;http://www.osyunwei.com_user/&quot;&gt;www.osyunwei.com_user&lt;/a&gt; #执行数据同步的用户名，可以设置多个，用英文状态下逗号隔开&lt;br&gt;hosts allow = 192.168.21.129  #允许进行数据同步的客户端IP地址，可以设置多个，用英文状态下逗号隔开&lt;br&gt;hosts deny = 192.168.21.254 #禁止数据同步的客户端IP地址，可以设置多个，用英文状态下逗号隔开&lt;br&gt;:wq!  #保存,退出&lt;br&gt;5、创建用户认证文件&lt;br&gt;vi /etc/rsync.pass #配置文件，添加以下内容&lt;br&gt;home_&lt;a href=&quot;http://www.osyunwei.com_user:123456&quot;&gt;www.osyunwei.com_user:123456&lt;/a&gt;  #格式，用户名:密码，可以设置多个，每行一个用户名:密码&lt;br&gt;:wq!  #保存退出&lt;br&gt;6、设置文件权限&lt;br&gt;chmod 600 /etc/rsyncd.conf  #设置文件所有者读取、写入权限&lt;br&gt;chmod 600 /etc/rsync.pass  #设置文件所有者读取、写入权限&lt;br&gt;7、启动rsync&lt;br&gt;/etc/init.d/xinetd start  #启动&lt;br&gt;service xinetd stop   #停止&lt;br&gt;service xinetd restart  #重新启动&lt;br&gt;第二部分：在源服务器192.168.21.129上操作&lt;br&gt;一、安装Rsync客户端&lt;br&gt;1、关闭SELINUX&lt;br&gt;vi /etc/selinux/config  #编辑防火墙配置文件&lt;br&gt;#SELINUX=enforcing  #注释掉&lt;br&gt;#SELINUXTYPE=targeted  #注释掉&lt;br&gt;SELINUX=disabled  #增加&lt;br&gt;:wq!  #保存退出&lt;br&gt;setenforce 0   #立即生效&lt;br&gt;2、开启防火墙tcp 873端口（Rsync默认端口，做为客户端的Rsync可以不用开启873端口）&lt;br&gt;vi /etc/sysconfig/iptables  #编辑防火墙配置文件&lt;br&gt;-A RH-Firewall-1-INPUT -m state –state NEW -m tcp -p tcp –dport 873 -j ACCEPT&lt;br&gt;:wq! #保存退出&lt;br&gt;/etc/init.d/iptables restart #最后重启防火墙使配置生效&lt;br&gt;3、安装Rsync客户端端软件&lt;br&gt;whereis rsync   #查看系统是否已安装rsync,出现下面的提示，说明已经安装&lt;br&gt;rsync: /usr/bin/rsync /usr/share/man/man1/rsync.1.gz&lt;br&gt;yum install  xinetd  #只安装xinetd即可，CentOS中是以xinetd来管理rsync服务的&lt;br&gt;yum install rsync xinetd #如果默认没有rsync，运行此命令进行安装rsync和xinetd&lt;br&gt;vi /etc/xinetd.d/rsync #编辑配置文件，设置开机启动rsync&lt;br&gt;disable = no #修改为no&lt;br&gt;/etc/init.d/xinetd start #启动（CentOS中是以xinetd来管理rsync服务的）&lt;br&gt;4、创建认证密码文件&lt;br&gt;vi /etc/passwd.txt  #编辑文件，添加以下内容&lt;br&gt;123456 #密码&lt;br&gt;:wq! #保存退出&lt;br&gt;chmod 600 /etc/passwd.txt  #设置文件权限，只设置文件所有者具有读取、写入权限即可&lt;br&gt;5、测试源服务器192.168.21.129到两台目标服务器192.168.21.127，192.168.21.128之间的数据同步&lt;br&gt;mkdir /home/&lt;a href=&quot;http://www.osyunwei.com/ceshi&quot;&gt;www.osyunwei.com/ceshi&lt;/a&gt;  #在源服务器上创建测试文件夹，然后在源服务器运行下面2行命令&lt;br&gt;rsync -avH –port=873 –progress –delete  /home/&lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com/&lt;/a&gt;  &lt;a href=&quot;mailto:&amp;#x68;&amp;#x6f;&amp;#109;&amp;#101;&amp;#95;&amp;#x77;&amp;#x77;&amp;#x77;&amp;#x2e;&amp;#111;&amp;#115;&amp;#121;&amp;#117;&amp;#x6e;&amp;#x77;&amp;#x65;&amp;#x69;&amp;#x2e;&amp;#99;&amp;#x6f;&amp;#x6d;&amp;#x5f;&amp;#x75;&amp;#x73;&amp;#101;&amp;#114;&amp;#64;&amp;#49;&amp;#x39;&amp;#50;&amp;#x2e;&amp;#x31;&amp;#x36;&amp;#x38;&amp;#x2e;&amp;#50;&amp;#49;&amp;#46;&amp;#x31;&amp;#50;&amp;#x37;&quot;&gt;&amp;#x68;&amp;#x6f;&amp;#109;&amp;#101;&amp;#95;&amp;#x77;&amp;#x77;&amp;#x77;&amp;#x2e;&amp;#111;&amp;#115;&amp;#121;&amp;#117;&amp;#x6e;&amp;#x77;&amp;#x65;&amp;#x69;&amp;#x2e;&amp;#99;&amp;#x6f;&amp;#x6d;&amp;#x5f;&amp;#x75;&amp;#x73;&amp;#101;&amp;#114;&amp;#64;&amp;#49;&amp;#x39;&amp;#50;&amp;#x2e;&amp;#x31;&amp;#x36;&amp;#x38;&amp;#x2e;&amp;#50;&amp;#49;&amp;#46;&amp;#x31;&amp;#50;&amp;#x37;&lt;/a&gt;::home_&lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com&lt;/a&gt; –password-file=/etc/passwd.txt&lt;br&gt;rsync -avH –port=873 –progress –delete  /home/&lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com/&lt;/a&gt;  &lt;a href=&quot;mailto:&amp;#104;&amp;#111;&amp;#x6d;&amp;#x65;&amp;#95;&amp;#x77;&amp;#119;&amp;#x77;&amp;#x2e;&amp;#111;&amp;#x73;&amp;#121;&amp;#117;&amp;#110;&amp;#119;&amp;#101;&amp;#x69;&amp;#46;&amp;#x63;&amp;#x6f;&amp;#109;&amp;#95;&amp;#117;&amp;#x73;&amp;#101;&amp;#114;&amp;#x40;&amp;#49;&amp;#x39;&amp;#50;&amp;#46;&amp;#x31;&amp;#x36;&amp;#56;&amp;#46;&amp;#50;&amp;#x31;&amp;#x2e;&amp;#49;&amp;#x32;&amp;#x38;&quot;&gt;&amp;#104;&amp;#111;&amp;#x6d;&amp;#x65;&amp;#95;&amp;#x77;&amp;#119;&amp;#x77;&amp;#x2e;&amp;#111;&amp;#x73;&amp;#121;&amp;#117;&amp;#110;&amp;#119;&amp;#101;&amp;#x69;&amp;#46;&amp;#x63;&amp;#x6f;&amp;#109;&amp;#95;&amp;#117;&amp;#x73;&amp;#101;&amp;#114;&amp;#x40;&amp;#49;&amp;#x39;&amp;#50;&amp;#46;&amp;#x31;&amp;#x36;&amp;#56;&amp;#46;&amp;#50;&amp;#x31;&amp;#x2e;&amp;#49;&amp;#x32;&amp;#x38;&lt;/a&gt;::home_&lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com&lt;/a&gt; –password-file=/etc/passwd.txt&lt;br&gt;运行完成后，分别在两台目标服务器192.168.21.127，192.168.21.128上查看，在/home/&lt;a href=&quot;http://www.osyunwei.com目录下有ceshi文件夹,说明数据同步成功./&quot;&gt;www.osyunwei.com目录下有ceshi文件夹，说明数据同步成功。&lt;/a&gt;&lt;br&gt;系统运维  &lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com&lt;/a&gt;  温馨提醒：qihang01原创内容 版权所有,转载请注明出处及原文链接&lt;br&gt;二、安装sersync工具，实时触发rsync进行同步&lt;br&gt;1、查看服务器内核是否支持inotify&lt;br&gt;ll /proc/sys/fs/inotify   #列出文件目录，出现下面的内容，说明服务器内核支持inotify&lt;br&gt;-rw-r–r– 1 root root 0 Mar  7 02:17 max_queued_events&lt;br&gt;-rw-r–r– 1 root root 0 Mar  7 02:17 max_user_instances&lt;br&gt;-rw-r–r– 1 root root 0 Mar  7 02:17 max_user_watches&lt;br&gt;备注：Linux下支持inotify的内核最小为2.6.13，可以输入命令：uname -a查看内核&lt;br&gt;CentOS 5.X 内核为2.6.18，默认已经支持inotify&lt;br&gt;2、修改inotify默认参数（inotify默认内核参数值太小）&lt;br&gt;查看系统默认参数值：&lt;br&gt;sysctl -a | grep max_queued_events&lt;br&gt;结果是：fs.inotify.max_queued_events = 16384&lt;br&gt;sysctl -a | grep max_user_watches&lt;br&gt;结果是：fs.inotify.max_user_watches = 8192&lt;br&gt;sysctl -a | grep max_user_instances&lt;br&gt;结果是：fs.inotify.max_user_instances = 128&lt;br&gt;修改参数：&lt;br&gt;sysctl -w fs.inotify.max_queued_events=”99999999”&lt;br&gt;sysctl -w fs.inotify.max_user_watches=”99999999”&lt;br&gt;sysctl -w fs.inotify.max_user_instances=”65535”&lt;br&gt;vi /etc/sysctl.conf #添加以下代码&lt;br&gt;fs.inotify.max_queued_events=99999999&lt;br&gt;fs.inotify.max_user_watches=99999999&lt;br&gt;fs.inotify.max_user_instances=65535&lt;br&gt;:wq! #保存退出&lt;br&gt;参数说明：&lt;br&gt;max_queued_events：&lt;br&gt;inotify队列最大长度，如果值太小，会出现”** Event Queue Overflow **”错误，导致监控文件不准确&lt;br&gt;max_user_watches：&lt;br&gt;要同步的文件包含多少目录，可以用：find /home/&lt;a href=&quot;http://www.osyunwei.com/&quot;&gt;www.osyunwei.com&lt;/a&gt; -type d | wc -l 统计，必须保证max_user_watches值大于统计结果（这里/home/&lt;a href=&quot;http://www.osyunwei.com为同步文件目录)/&quot;&gt;www.osyunwei.com为同步文件目录）&lt;/a&gt;&lt;br&gt;max_user_instances：&lt;br&gt;每个用户创建inotify实例最大值&lt;br&gt;3、安装sersync&lt;br&gt;sersync下载地址：&lt;a href=&quot;https://sersync.googlecode.com/files/sersync2.5.4_64bit_binary_stable_final.tar.gz&quot;&gt;https://sersync.googlecode.com/files/sersync2.5.4_64bit_binary_stable_final.tar.gz&lt;/a&gt;&lt;br&gt;上传sersync2.5.4_64bit_binary_stable_final.tar.gz到/usr/local/src目录下&lt;br&gt;cd /usr/local/src&lt;br&gt;tar zxvf sersync2.5.4_64bit_binary_stable_final.tar.gz  #解压&lt;br&gt;mv GNU-Linux-x86  /usr/local/sersync  #移动目录到/usr/local/sersync&lt;br&gt;4、配置sersync&lt;br&gt;cd  /usr/local/sersync #进入sersync安装目录&lt;br&gt;cp confxml.xml confxml.xml-bak  #备份原文件&lt;br&gt;vi confxml.xml  #编辑，修改下面的代码&lt;br&gt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;&lt;/p&gt;
&lt;head version=&quot;2.5&quot;&gt;
&lt;host hostip=&quot;localhost&quot; port=&quot;8008&quot;&gt;&lt;/host&gt;
&lt;debug start=&quot;false&quot;&gt;
&lt;filesystem xfs=&quot;false&quot;&gt;
&lt;filter start=&quot;false&quot;&gt;
&lt;exclude expression=&quot;(.*)\.svn&quot;&gt;&lt;/exclude&gt;
&lt;exclude expression=&quot;(.*)\.gz&quot;&gt;&lt;/exclude&gt;
&lt;exclude expression=&quot;^info/*&quot;&gt;&lt;/exclude&gt;
&lt;exclude expression=&quot;^static/*&quot;&gt;&lt;/exclude&gt;
&lt;/filter&gt;
&lt;inotify&gt;
&lt;delete start=&quot;true&quot;&gt;
&lt;createfolder start=&quot;true&quot;&gt;
&lt;createfile start=&quot;false&quot;&gt;
&lt;closewrite start=&quot;true&quot;&gt;
&lt;movefrom start=&quot;true&quot;&gt;
&lt;moveto start=&quot;true&quot;&gt;
&lt;attrib start=&quot;false&quot;&gt;
&lt;modify start=&quot;false&quot;&gt;
&lt;/modify&gt;&lt;/attrib&gt;&lt;/moveto&gt;&lt;/movefrom&gt;&lt;/closewrite&gt;&lt;/createfile&gt;&lt;/createfolder&gt;&lt;/delete&gt;&lt;/inotify&gt;
&lt;sersync&gt;
&lt;localpath watch=&quot;/home/www.osyunwei.com&quot;&gt;
&lt;remote ip=&quot;192.168.21.127&quot; name=&quot;home_www.osyunwei.com&quot;&gt;
&lt;remote ip=&quot;192.168.21.128&quot; name=&quot;home_www.osyunwei.com&quot;&gt;
&lt;!--&lt;remote ip=&quot;192.168.8.40&quot; name=&quot;tongbu&quot;/&gt;--&gt;
&lt;/remote&gt;&lt;/remote&gt;&lt;/localpath&gt;
&lt;rsync&gt;
&lt;commonparams params=&quot;-artuz&quot;&gt;
&lt;auth start=&quot;true&quot; users=&quot;home_www.osyunwei.com_user&quot; passwordfile=&quot;/etc/passwd.txt&quot;&gt;
&lt;userdefinedport start=&quot;false&quot; port=&quot;874&quot;&gt;&lt;!-- port=874 --&gt;
&lt;timeout start=&quot;false&quot; time=&quot;100&quot;&gt;&lt;!-- timeout=100 --&gt;
&lt;ssh start=&quot;false&quot;&gt;
&lt;/ssh&gt;&lt;/timeout&gt;&lt;/userdefinedport&gt;&lt;/auth&gt;&lt;/commonparams&gt;&lt;/rsync&gt;
&lt;faillog path=&quot;/tmp/rsync_fail_log.sh&quot; timetoexecute=&quot;60&quot;&gt;&lt;!--default every 60mins execute once--&gt;
&lt;crontab start=&quot;true&quot; schedule=&quot;600&quot;&gt;&lt;!--600mins--&gt;
&lt;crontabfilter start=&quot;false&quot;&gt;
&lt;exclude expression=&quot;*.php&quot;&gt;&lt;/exclude&gt;
&lt;exclude expression=&quot;info/*&quot;&gt;&lt;/exclude&gt;
&lt;/crontabfilter&gt;
&lt;/crontab&gt;
&lt;plugin start=&quot;false&quot; name=&quot;command&quot;&gt;
&lt;/plugin&gt;&lt;/faillog&gt;&lt;/sersync&gt;
&lt;plugin name=&quot;command&quot;&gt;
&lt;param prefix=&quot;/bin/sh&quot; suffix ignoreerror=&quot;true&quot;&gt;  &lt;!--prefix /opt/tongbu/mmm.sh suffix--&gt;
&lt;filter start=&quot;false&quot;&gt;
&lt;include expression=&quot;(.*)\.php&quot;&gt;
&lt;include expression=&quot;(.*)\.sh&quot;&gt;
&lt;/include&gt;&lt;/include&gt;&lt;/filter&gt;
&lt;/plugin&gt;
&lt;plugin name=&quot;socket&quot;&gt;
&lt;localpath watch=&quot;/opt/tongbu&quot;&gt;
&lt;deshost ip=&quot;192.168.138.20&quot; port=&quot;8009&quot;&gt;
&lt;/deshost&gt;&lt;/localpath&gt;
&lt;/plugin&gt;
&lt;plugin name=&quot;refreshCDN&quot;&gt;
&lt;localpath watch=&quot;/data0/htdocs/cms.xoyo.com/site/&quot;&gt;
&lt;cdninfo domainname=&quot;ccms.chinacache.com&quot; port=&quot;80&quot; username=&quot;xxxx&quot; passwd=&quot;xxxx&quot;&gt;
&lt;sendurl base=&quot;http://pic.xoyo.com/cms&quot;&gt;
&lt;regexurl regex=&quot;false&quot; match=&quot;cms.xoyo.com/site([/a-zA-Z0-9]*).xoyo.com/images&quot;&gt;
&lt;/regexurl&gt;&lt;/sendurl&gt;&lt;/cdninfo&gt;&lt;/localpath&gt;
&lt;/plugin&gt;
&lt;/filesystem&gt;&lt;/debug&gt;&lt;/head&gt;
:wq!  #保存退出
参数说明：
localpath watch=&quot;/home/www.osyunwei.com&quot;：#源服务器同步目录
192.168.21.127，192.168.21.128：#目标服务器IP地址
name=&quot;home_www.osyunwei.com&quot;： #目标服务器rsync同步目录模块名称
users=&quot;home_www.osyunwei.com_user&quot;： #目标服务器rsync同步用户名
passwordfile=&quot;/etc/passwd.txt&quot;： #目标服务器rsync同步用户的密码在源服务器的存放路径
remote ip=&quot;192.168.21.127&quot;:  #目标服务器ip，每行一个
remote ip=&quot;192.168.21.128&quot;:  #目标服务器ip，每行一个
failLog path=&quot;/tmp/rsync_fail_log.sh&quot;  #脚本运行失败日志记录
start=&quot;true&quot;  #设置为true，每隔600分钟执行一次全盘同步
5、设置sersync监控开机自动执行
vi /etc/rc.d/rc.local  #编辑，在最后添加一行
/usr/local/sersync/sersync2 -d -r -o  /usr/local/sersync/confxml.xml  ＃设置开机自动运行脚本
:wq!  #保存退出
6、添加脚本监控sersync是否正常运行
vi  /home/crontab/check_sersync.sh  #编辑，添加以下代码
#!/bin/sh
sersync=&quot;/usr/local/sersync/sersync2&quot;
confxml=&quot;/usr/local/sersync/confxml.xml&quot;
status=$(ps aux |grep &#39;sersync2&#39;|grep -v &#39;grep&#39;|wc -l)
if [ $status -eq 0 ];
then
$sersync -d -r -o $confxml &amp;
else
exit 0;
fi
:wq!  #保存退出
chmod +x /home/crontab/check_sersync.sh #添加脚本执行权限
vi /etc/crontab #编辑，在最后添加下面一行
*/5 * * * * root /home/crontab/check_sersync.sh &gt; /dev/null 2&gt;&amp;1  #每隔5分钟执行一次脚本
service crond reload  #重新加载服务
6、测试sersync实时触发rsync同步脚本是否正常运行
在源服务器192.168.21.129上创建文件inotify_rsync_ceshi
mkdir /home/www.osyunwei.com/inotify_rsync_ceshi
重新启动源服务器：192.168.21.129
等系统启动之后，查看两台目标服务器192.168.21.127，192.168.21.128的/home/www.osyunwei.com下是否有inotify_rsync_ceshi文件夹
然后再在源服务器192.168.21.129创建文件夹inotify_rsync_ceshi_new
mkdir /home/www.osyunwei.com/inotify_rsync_ceshi_new
继续查看两台目标服务器192.168.21.127，192.168.21.128的/home/www.osyunwei.com下是否有inotify_rsync_ceshi_new文件夹
如果以上测试都通过，说明inotify实时触发rsync同步脚本运行正常。
至此，Linux下Rsync+sersync实现数据实时同步完成。
扩展阅读：
sersync开发者网站：http://blog.johntechinfo.com/sersyncguild
rsync参数
-v, --verbose 详细模式输出
-q, --quiet 精简输出模式
-c, --checksum 打开校验开关，强制对文件传输进行校验
-a, --archive 归档模式，表示以递归方式传输文件，并保持所有文件属性，等于-rlptgoD
-r, --recursive 对子目录以递归模式处理
-R, --relative 使用相对路径信息
-b, --backup 创建备份，也就是对于目的已经存在有同样的文件名时，将老的文件重新命名为~filename。可以使用--suffix选项来指定不同的备份文件前缀。
--backup-dir 将备份文件(如~filename)存放在在目录下。
-suffix=SUFFIX 定义备份文件前缀
-u, --update 仅仅进行更新，也就是跳过所有已经存在于DST，并且文件时间晚于要备份的文件。(不覆盖更新的文件)
-l, --links 保留软链结
-L, --copy-links 想对待常规文件一样处理软链结
--copy-unsafe-links 仅仅拷贝指向SRC路径目录树以外的链结
--safe-links 忽略指向SRC路径目录树以外的链结
-H, --hard-links 保留硬链结
-p, --perms 保持文件权限
-o, --owner 保持文件属主信息
-g, --group 保持文件属组信息
-D, --devices 保持设备文件信息
-t, --times 保持文件时间信息
-S, --sparse 对稀疏文件进行特殊处理以节省DST的空间
-n, --dry-run现实哪些文件将被传输
-W, --whole-file 拷贝文件，不进行增量检测
-x, --one-file-system 不要跨越文件系统边界
-B, --block-size=SIZE 检验算法使用的块尺寸，默认是700字节
-e, --rsh=COMMAND 指定使用rsh、ssh方式进行数据同步
--rsync-path=PATH 指定远程服务器上的rsync命令所在路径信息
-C, --cvs-exclude 使用和CVS一样的方法自动忽略文件，用来排除那些不希望传输的文件
--existing 仅仅更新那些已经存在于DST的文件，而不备份那些新创建的文件
--delete 删除那些DST中SRC没有的文件
--delete-excluded 同样删除接收端那些被该选项指定排除的文件
--delete-after 传输结束以后再删除
--ignore-errors 及时出现IO错误也进行删除
--max-delete=NUM 最多删除NUM个文件
--partial 保留那些因故没有完全传输的文件，以是加快随后的再次传输
--force 强制删除目录，即使不为空
--numeric-ids 不将数字的用户和组ID匹配为用户名和组名
--timeout=TIME IP超时时间，单位为秒
-I, --ignore-times 不跳过那些有同样的时间和长度的文件
--size-only 当决定是否要备份文件时，仅仅察看文件大小而不考虑文件时间
--modify-window=NUM 决定文件是否时间相同时使用的时间戳窗口，默认为0
-T --temp-dir=DIR 在DIR中创建临时文件
--compare-dest=DIR 同样比较DIR中的文件来决定是否需要备份
-P 等同于 --partial
--progress 显示备份过程
-z, --compress 对备份的文件在传输时进行压缩处理
--exclude=PATTERN 指定排除不需要传输的文件模式
--include=PATTERN 指定不排除而需要传输的文件模式
--exclude-from=FILE 排除FILE中指定模式的文件
--include-from=FILE 不排除FILE指定模式匹配的文件
--version 打印版本信息
--address 绑定到特定的地址
--config=FILE 指定其他的配置文件，不使用默认的rsyncd.conf文件
--port=PORT 指定其他的rsync服务端口
--blocking-io 对远程shell使用阻塞IO
-stats 给出某些文件的传输状态
--progress 在传输时现实传输过程
--log-format=formAT 指定日志文件格式
--password-file=FILE 从FILE中得到密码
--bwlimit=KBPS 限制I/O带宽，KBytes per second
-h, --help 显示帮助信息</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/rsync%E9%85%8D%E7%BD%AE/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/rsync%E9%85%8D%E7%BD%AE/</id>
    <published>2020-10-16T03:41:31.481Z</published>
    <updated>2020-10-16T03:27:24.340Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install rsync -y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;~~~~&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 配置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;mkdir -p /nfsbackup&lt;br&gt;useradd rsync -M /sbin/nologin -s&lt;br&gt;chown  -R rsync.rsync /nfsbackup&lt;/p&gt;
&lt;p&gt;#配置文件&lt;br&gt;vim /etc/rsyncd.conf&lt;br&gt;###rsyncd.conf start##&lt;br&gt;uid = rsync&lt;br&gt;gid = rsync&lt;br&gt;use chroot = no&lt;br&gt;max connections = 200&lt;br&gt;timeout = 300&lt;br&gt;pid file = /var/run/rsyncd.pid&lt;br&gt;lock file = /var/run/rsync.lock&lt;br&gt;log file = /var/log/rsyncd.log&lt;br&gt;ignore errors&lt;br&gt;read only = false&lt;br&gt;list = false&lt;br&gt;hosts allow = 172.16.1.0/24&lt;br&gt;hosts deny = 0.0.0.0/32&lt;br&gt;auth users = rsync_backup&lt;br&gt;secrets file = /etc/rsync.password&lt;/p&gt;
&lt;p&gt;[backup]&lt;br&gt;path = /backup&lt;br&gt;[nfsbackup]&lt;br&gt;path = /nfsbackup&lt;br&gt;##rsync_config__________end&lt;/p&gt;
&lt;p&gt;密码文件&lt;br&gt;cat /etc/rsync.password&lt;br&gt;rsync_backup:suguowei&lt;br&gt;设置权限&lt;br&gt;chmod 600 /etc/rsync.password&lt;/p&gt;
&lt;p&gt;启动rsync&lt;br&gt;systemctl start rsyncd&lt;br&gt;检查&lt;br&gt;ss -nltup|grep 873&lt;br&gt;nfs服务器上操作&lt;br&gt;rsync -avz /data/ &lt;a href=&quot;mailto:&amp;#x72;&amp;#x73;&amp;#x79;&amp;#110;&amp;#99;&amp;#x5f;&amp;#x62;&amp;#x61;&amp;#99;&amp;#107;&amp;#117;&amp;#112;&amp;#64;&amp;#49;&amp;#x37;&amp;#50;&amp;#x2e;&amp;#x31;&amp;#x36;&amp;#46;&amp;#49;&amp;#46;&amp;#x34;&amp;#49;&quot;&gt;&amp;#x72;&amp;#x73;&amp;#x79;&amp;#110;&amp;#99;&amp;#x5f;&amp;#x62;&amp;#x61;&amp;#99;&amp;#107;&amp;#117;&amp;#112;&amp;#64;&amp;#49;&amp;#x37;&amp;#50;&amp;#x2e;&amp;#x31;&amp;#x36;&amp;#46;&amp;#49;&amp;#46;&amp;#x34;&amp;#49;&lt;/a&gt;::nfsbackup/ –password-file=/etc/rsync.password&lt;/p&gt;
&lt;p&gt;客户端操作&lt;br&gt;安装&lt;br&gt;yum install rsync&lt;br&gt;配置&lt;br&gt;vim /etc/rsync.password&lt;br&gt;chmod 600 /etc/rsync.password&lt;br&gt;推送测试&lt;br&gt;rsync -avz -P hello.txt  &lt;a href=&quot;mailto:&amp;#x72;&amp;#115;&amp;#121;&amp;#110;&amp;#99;&amp;#95;&amp;#98;&amp;#97;&amp;#x63;&amp;#107;&amp;#117;&amp;#x70;&amp;#64;&amp;#49;&amp;#x37;&amp;#50;&amp;#x2e;&amp;#51;&amp;#x33;&amp;#46;&amp;#x30;&amp;#46;&amp;#56;&amp;#x33;&quot;&gt;&amp;#x72;&amp;#115;&amp;#121;&amp;#110;&amp;#99;&amp;#95;&amp;#98;&amp;#97;&amp;#x63;&amp;#107;&amp;#117;&amp;#x70;&amp;#64;&amp;#49;&amp;#x37;&amp;#50;&amp;#x2e;&amp;#51;&amp;#x33;&amp;#46;&amp;#x30;&amp;#46;&amp;#56;&amp;#x33;&lt;/a&gt;::nfsbackup –password-file=/etc/rsync.password&lt;/p&gt;
</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/rsync%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/10/16/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/rsync%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B/</id>
    <published>2020-10-16T03:41:31.480Z</published>
    <updated>2020-10-16T03:27:29.184Z</updated>
    
    
    <summary type="html">&lt;p&gt;&lt;del&gt;~&lt;/del&gt;&lt;br&gt;1、搭建备份服务器（backup服务器之rsync服务）&lt;br&gt;工具：Rsync&lt;br&gt;能实现本地和远程的服务器&lt;/p&gt;
&lt;p&gt;rsync 保持属性复制&lt;br&gt;rsync vzrtopg /etc/hosts /mnt/&lt;br&gt;同步功能，删除，和本地同步&lt;br&gt;rsync -avz –delete /tmp1/ /mnt/&lt;/p&gt;
&lt;p&gt;普通复制，同等于CP&lt;br&gt;rsync -vzrtopg /etc/host/ /tmp    复制（带属性）&lt;br&gt;rsync -avz –delete /etc/host/ /tmp    同步删除（以/tc/host）为原&lt;br&gt;远程复制，复制文件到远端，通过隧道&lt;br&gt;rsync -avz /etc/host -e ‘ssh -p 22’ &lt;a href=&quot;mailto:&amp;#111;&amp;#108;&amp;#100;&amp;#x62;&amp;#x6f;&amp;#x79;&amp;#x40;&amp;#x31;&amp;#x30;&amp;#x2e;&amp;#x30;&amp;#x2e;&amp;#x30;&amp;#46;&amp;#x33;&amp;#49;&quot;&gt;&amp;#111;&amp;#108;&amp;#100;&amp;#x62;&amp;#x6f;&amp;#x79;&amp;#x40;&amp;#x31;&amp;#x30;&amp;#x2e;&amp;#x30;&amp;#x2e;&amp;#x30;&amp;#46;&amp;#x33;&amp;#49;&lt;/a&gt;:/tmp&lt;br&gt;-e使用通信协议，隧道&lt;br&gt;-p保持权限&lt;br&gt;rsync -avz /etc/host -e ‘ssh -p 22’ &lt;a href=&quot;mailto:&amp;#x6f;&amp;#108;&amp;#x64;&amp;#98;&amp;#x6f;&amp;#121;&amp;#64;&amp;#x31;&amp;#48;&amp;#46;&amp;#48;&amp;#46;&amp;#x30;&amp;#46;&amp;#51;&amp;#49;&quot;&gt;&amp;#x6f;&amp;#108;&amp;#x64;&amp;#98;&amp;#x6f;&amp;#121;&amp;#64;&amp;#x31;&amp;#48;&amp;#46;&amp;#48;&amp;#46;&amp;#x30;&amp;#46;&amp;#51;&amp;#49;&lt;/a&gt;:/tmp ssh key    免密钥，一班用于定时任务&lt;br&gt;服务端配置文件&lt;br&gt;/etc/rsyncd.conf,默认是不存在，需要创建&lt;/p&gt;
&lt;p&gt;#rsync_config__________________start&lt;br&gt;#created by oldboy 15:01 2007-6-5&lt;br&gt;#QQ&lt;br&gt;###rsyncd.conf start##&lt;br&gt;uid = rsync&lt;br&gt;gid = rsync&lt;br&gt;use chroot = no&lt;br&gt;max connections = 200&lt;br&gt;timeout = 300&lt;br&gt;pid file = /var/run/rsyncd.pid&lt;br&gt;lock file = /var/run/rsync.lock&lt;br&gt;log file = /var/log/rsyncd.log&lt;br&gt;[backup]&lt;br&gt;path = /backup&lt;br&gt;ignore errors&lt;br&gt;read only = false&lt;br&gt;list = false&lt;br&gt;hosts allow = 172.16.1.0/24    #允许连接的IP，一般是内网&lt;br&gt;hosts deny = 0.0.0.0/32    #拒绝连接的IP&lt;br&gt;auth users = rsync_backup&lt;br&gt;secrets file = /etc/rsync.password&lt;br&gt;#rsync_config__________end&lt;br&gt;########################################&lt;/p&gt;
&lt;p&gt;添加用户&lt;br&gt;useradd rsync -s /sbin/nologin -M    虚拟用户&lt;br&gt;启动服务&lt;br&gt;rsync –daemon&lt;br&gt;查看是否启动&lt;br&gt;ps -ef|grep rsync|grep -v grep&lt;br&gt;创建目录&lt;br&gt;mkdir /backup&lt;br&gt;改变backup权限&lt;br&gt;chown rsync.rsync /backup/&lt;br&gt;查看文件有没有&lt;br&gt;ll /etc/rsync.password&lt;br&gt;如果没有泽创建文件&lt;br&gt;touch /etc/rsync.password&lt;br&gt;编辑文件&lt;br&gt;rsync_backup:oldboy#用户名：密码&lt;br&gt;然后更改权限&lt;br&gt;chmod 600 /etc/rsync.password&lt;br&gt;查看端口&lt;br&gt;lsof -i 873&lt;br&gt;netstat -lntup|grep 873&lt;/p&gt;
&lt;p&gt;1.排错：查看日志&lt;br&gt;2.查看输出结果&lt;br&gt;3.熟练部署过程（原理）&lt;br&gt;tail /var/log/rsyncd.log&lt;br&gt;命令示例1：&lt;br&gt;rsync -avz /backup/ &lt;a href=&quot;mailto:&amp;#x72;&amp;#x73;&amp;#x79;&amp;#110;&amp;#99;&amp;#95;&amp;#98;&amp;#x61;&amp;#x63;&amp;#107;&amp;#117;&amp;#x70;&amp;#64;&amp;#x31;&amp;#x37;&amp;#50;&amp;#x2e;&amp;#x31;&amp;#x36;&amp;#46;&amp;#49;&amp;#46;&amp;#52;&amp;#49;&quot;&gt;&amp;#x72;&amp;#x73;&amp;#x79;&amp;#110;&amp;#99;&amp;#95;&amp;#98;&amp;#x61;&amp;#x63;&amp;#107;&amp;#117;&amp;#x70;&amp;#64;&amp;#x31;&amp;#x37;&amp;#50;&amp;#x2e;&amp;#x31;&amp;#x36;&amp;#46;&amp;#49;&amp;#46;&amp;#52;&amp;#49;&lt;/a&gt;::backup/ –pasword-file=/etc/rsync.password&lt;br&gt;命令示例2:&lt;br&gt;rsync -avz /backup rsync://rsync_backup@172.16.1.41/backup/ –password-file=/etc/rsync.password&lt;/p&gt;
&lt;p&gt;拷贝服务器端模块内容(从客户端拉)&lt;br&gt;rsync -avz &lt;a href=&quot;mailto:&amp;#x72;&amp;#115;&amp;#x79;&amp;#x6e;&amp;#x63;&amp;#95;&amp;#x62;&amp;#97;&amp;#99;&amp;#x6b;&amp;#117;&amp;#x70;&amp;#x40;&amp;#49;&amp;#55;&amp;#x32;&amp;#x2e;&amp;#49;&amp;#54;&amp;#46;&amp;#x31;&amp;#x2e;&amp;#x34;&amp;#49;&quot;&gt;&amp;#x72;&amp;#115;&amp;#x79;&amp;#x6e;&amp;#x63;&amp;#95;&amp;#x62;&amp;#97;&amp;#99;&amp;#x6b;&amp;#117;&amp;#x70;&amp;#x40;&amp;#49;&amp;#55;&amp;#x32;&amp;#x2e;&amp;#49;&amp;#54;&amp;#46;&amp;#x31;&amp;#x2e;&amp;#x34;&amp;#49;&lt;/a&gt;::backup/ /backup/ –password-file=/etc/rsync.password&lt;br&gt;排除同步&lt;br&gt;排除单个文件：&lt;br&gt;rsync -avz –exclude=a /backup/ &lt;a href=&quot;mailto:&amp;#114;&amp;#x73;&amp;#x79;&amp;#110;&amp;#x63;&amp;#95;&amp;#98;&amp;#97;&amp;#99;&amp;#107;&amp;#117;&amp;#112;&amp;#x40;&amp;#x31;&amp;#55;&amp;#x32;&amp;#x2e;&amp;#49;&amp;#x36;&amp;#x2e;&amp;#49;&amp;#x2e;&amp;#x34;&amp;#x31;&quot;&gt;&amp;#114;&amp;#x73;&amp;#x79;&amp;#110;&amp;#x63;&amp;#95;&amp;#98;&amp;#97;&amp;#99;&amp;#107;&amp;#117;&amp;#112;&amp;#x40;&amp;#x31;&amp;#55;&amp;#x32;&amp;#x2e;&amp;#49;&amp;#x36;&amp;#x2e;&amp;#49;&amp;#x2e;&amp;#x34;&amp;#x31;&lt;/a&gt;::backup –passwork-file=/etc/rsync.password&lt;br&gt;排除两个&lt;br&gt;rsync -avz –exclude={a,b} /backup/ &lt;a href=&quot;mailto:&amp;#114;&amp;#115;&amp;#x79;&amp;#x6e;&amp;#x63;&amp;#x5f;&amp;#x62;&amp;#x61;&amp;#99;&amp;#x6b;&amp;#117;&amp;#112;&amp;#64;&amp;#x31;&amp;#55;&amp;#x32;&amp;#46;&amp;#x31;&amp;#x36;&amp;#x2e;&amp;#x31;&amp;#46;&amp;#x34;&amp;#x31;&quot;&gt;&amp;#114;&amp;#115;&amp;#x79;&amp;#x6e;&amp;#x63;&amp;#x5f;&amp;#x62;&amp;#x61;&amp;#99;&amp;#x6b;&amp;#117;&amp;#112;&amp;#64;&amp;#x31;&amp;#55;&amp;#x32;&amp;#46;&amp;#x31;&amp;#x36;&amp;#x2e;&amp;#x31;&amp;#46;&amp;#x34;&amp;#x31;&lt;/a&gt;::backup –password-file=/etc/rsync.password&lt;br&gt;文件排除方法&lt;br&gt;rsync -avz –exclude-from=paichu.log /backup/ &lt;a href=&quot;mailto:&amp;#x72;&amp;#x73;&amp;#121;&amp;#x6e;&amp;#x63;&amp;#95;&amp;#x62;&amp;#97;&amp;#99;&amp;#107;&amp;#x75;&amp;#112;&amp;#64;&amp;#x31;&amp;#55;&amp;#x32;&amp;#x2e;&amp;#49;&amp;#54;&amp;#46;&amp;#49;&amp;#46;&amp;#52;&amp;#x31;&quot;&gt;&amp;#x72;&amp;#x73;&amp;#121;&amp;#x6e;&amp;#x63;&amp;#95;&amp;#x62;&amp;#97;&amp;#99;&amp;#107;&amp;#x75;&amp;#112;&amp;#64;&amp;#x31;&amp;#55;&amp;#x32;&amp;#x2e;&amp;#49;&amp;#54;&amp;#46;&amp;#49;&amp;#46;&amp;#52;&amp;#x31;&lt;/a&gt;::backup –password-file=/etc/rsync.password&lt;br&gt;无差异同步&lt;br&gt;rsync -avz –delete /backup/ &lt;a href=&quot;mailto:&amp;#114;&amp;#115;&amp;#121;&amp;#x6e;&amp;#x63;&amp;#95;&amp;#x62;&amp;#x61;&amp;#99;&amp;#107;&amp;#117;&amp;#x70;&amp;#x40;&amp;#x31;&amp;#x37;&amp;#x32;&amp;#46;&amp;#49;&amp;#x36;&amp;#46;&amp;#49;&amp;#46;&amp;#x34;&amp;#x31;&quot;&gt;&amp;#114;&amp;#115;&amp;#121;&amp;#x6e;&amp;#x63;&amp;#95;&amp;#x62;&amp;#x61;&amp;#99;&amp;#107;&amp;#117;&amp;#x70;&amp;#x40;&amp;#x31;&amp;#x37;&amp;#x32;&amp;#46;&amp;#49;&amp;#x36;&amp;#46;&amp;#49;&amp;#46;&amp;#x34;&amp;#x31;&lt;/a&gt;::backup –password-file=/etc/rsync.password&lt;br&gt;限速&lt;br&gt;rsync -avz –bwlimit=10 /backup &lt;a href=&quot;mailto:&amp;#114;&amp;#115;&amp;#x79;&amp;#110;&amp;#99;&amp;#95;&amp;#98;&amp;#97;&amp;#99;&amp;#107;&amp;#x75;&amp;#x70;&amp;#x40;&amp;#49;&amp;#55;&amp;#50;&amp;#46;&amp;#x31;&amp;#54;&amp;#x2e;&amp;#x31;&amp;#x2e;&amp;#x34;&amp;#49;&quot;&gt;&amp;#114;&amp;#115;&amp;#x79;&amp;#110;&amp;#99;&amp;#95;&amp;#98;&amp;#97;&amp;#99;&amp;#107;&amp;#x75;&amp;#x70;&amp;#x40;&amp;#49;&amp;#55;&amp;#50;&amp;#46;&amp;#x31;&amp;#54;&amp;#x2e;&amp;#x31;&amp;#x2e;&amp;#x34;&amp;#49;&lt;/a&gt;::backup –password-file=/etc/rsync.password&lt;/p&gt;
&lt;p&gt;dd if=/dev/zero of=test1 bs=1M count=128    创建128个1M的文件&lt;/p&gt;
&lt;p&gt;rsync -rlptoDvz /etc/host* &lt;a href=&quot;mailto:&amp;#114;&amp;#x73;&amp;#x79;&amp;#110;&amp;#x63;&amp;#95;&amp;#98;&amp;#97;&amp;#x63;&amp;#x6b;&amp;#x75;&amp;#x70;&amp;#x40;&amp;#x31;&amp;#x37;&amp;#x32;&amp;#x2e;&amp;#x31;&amp;#54;&amp;#x2e;&amp;#x31;&amp;#46;&amp;#52;&amp;#x31;&quot;&gt;&amp;#114;&amp;#x73;&amp;#x79;&amp;#110;&amp;#x63;&amp;#95;&amp;#98;&amp;#97;&amp;#x63;&amp;#x6b;&amp;#x75;&amp;#x70;&amp;#x40;&amp;#x31;&amp;#x37;&amp;#x32;&amp;#x2e;&amp;#x31;&amp;#54;&amp;#x2e;&amp;#x31;&amp;#46;&amp;#52;&amp;#x31;&lt;/a&gt;::backup/&lt;br&gt;rsync3.1.2版本参数用-avz会出现问题，需要更换成 -rlptoDvz，和原来参数对比缺少一个-g参数&lt;/p&gt;
</summary>
    
    
    
    
  </entry>
  
</feed>
