<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>苏国伟</title>
  
  
  <link href="https://sugw.github.io/sugw.github.io/atom.xml" rel="self"/>
  
  <link href="https://sugw.github.io/sugw.github.io/"/>
  <updated>2021-03-04T07:11:46.745Z</updated>
  <id>https://sugw.github.io/sugw.github.io/</id>
  
  <author>
    <name>苏国伟</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2021/03/04/yum-metadata-parser-1.1.4-10.el7.x86_64/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/03/04/yum-metadata-parser-1.1.4-10.el7.x86_64/</id>
    <published>2021-03-04T07:11:46.744Z</published>
    <updated>2021-03-04T07:11:46.745Z</updated>
    
    
    <summary type="html">yum-metadata-parser-1.1.4-10.el7.x86_64

yum-3.4.3-150.el7.centos.noarch
yum-utils-1.1.31-40.el7.noarch
yum-plugin-fastestmirror-1.1.31-40.el7.noarch
yum-rhn-plugin-2.0.1-6.el7.noarch

$releasever</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>iowait 过高问题的查找及解决linux</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/02/25/title%20Linux%20%E4%B9%8B%E7%A3%81%E7%9B%98IO%E6%8E%92%E6%9F%A5/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/02/25/title%20Linux%20%E4%B9%8B%E7%A3%81%E7%9B%98IO%E6%8E%92%E6%9F%A5/</id>
    <published>2021-02-25T10:10:37.396Z</published>
    <updated>2021-02-25T10:16:01.489Z</updated>
    
    
    <summary type="html">&lt;p&gt;参考链接：&lt;a href=&quot;https://linux.cn/article-10815-1.html&quot;&gt;https://linux.cn/article-10815-1.html&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;iotop命令&quot;&gt;&lt;a href=&quot;#iotop命令&quot; class=&quot;headerlink&quot; title=&quot;iotop命令&quot;&gt;&lt;/a&gt;iotop命令&lt;/h1&gt;&lt;figure class=&quot;highlight angelscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;、iotop命令&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iotop命令是一个用来监视磁盘I/O使用状况的top类工具。iotop具有与top相似的UI，其中包括PID、用户、I/O、进程等相关信息。Linux下的IO统计工具如iostat，nmon等大多数是只能统计到per设备的读写情况，如果你想知道每个进程是如何使用IO的就比较麻烦，使用iotop命令可以很方便的查看。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iotop使用Python语言编写而成，要求Python2&lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;（及以上版本）和Linux kernel2&lt;span class=&quot;number&quot;&gt;.6&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.20&lt;/span&gt;（及以上版本）。iotop提供有源代码及rpm包，可从其官方主页下载。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;、安装&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Ubuntu系统&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt-&lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt; install iotop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;或&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# CentOS系统&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install iotop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;编译安装&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; wget http:&lt;span class=&quot;comment&quot;&gt;//guichaz.free.fr/iotop/files/iotop-0.4.4.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; tar zxf iotop&lt;span class=&quot;number&quot;&gt;-0.4&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.4&lt;/span&gt;.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; python setup.py build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; python setup.py install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;、语法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iotop （选项）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;、选项&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-o：只显示有io操作的进程 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-b：批量显示，无交互，主要用作记录到文件。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-n NUM：显示NUM次，主要用于非交互式模式。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-d SEC：间隔SEC秒显示一次。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-p PID：监控的进程pid。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-u USER：监控的进程用户。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;、iotop常用快捷键&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;左右箭头：改变排序方式，默认是按IO排序。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;r：改变排序顺序。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;o：只显示有IO输出的进程。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p：进程/线程的显示方式的切换。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a：显示累积使用量。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;q：退出。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;一、iostat和iowait详细解说-查看磁盘瓶颈&quot;&gt;&lt;a href=&quot;#一、iostat和iowait详细解说-查看磁盘瓶颈&quot; class=&quot;headerlink&quot; title=&quot;一、iostat和iowait详细解说-查看磁盘瓶颈&quot;&gt;&lt;/a&gt;一、iostat和iowait详细解说-查看磁盘瓶颈&lt;/h2&gt;&lt;h3 id=&quot;一、iostat基础&quot;&gt;&lt;a href=&quot;#一、iostat基础&quot; class=&quot;headerlink&quot; title=&quot;一、iostat基础&quot;&gt;&lt;/a&gt;一、iostat基础&lt;/h3&gt;</summary>
    
    
    
    
    <category term="笔记" scheme="https://sugw.github.io/sugw.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>linux查看硬件信息</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/02/25/Linux%E6%9F%A5%E7%9C%8B%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF%E5%91%BD%E4%BB%A4/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/02/25/Linux%E6%9F%A5%E7%9C%8B%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF%E5%91%BD%E4%BB%A4/</id>
    <published>2021-02-25T08:01:16.313Z</published>
    <updated>2021-02-26T02:04:12.157Z</updated>
    
    
    <summary type="html">&lt;h3 id=&quot;服务器型号&quot;&gt;&lt;a href=&quot;#服务器型号&quot; class=&quot;headerlink&quot; title=&quot;服务器型号&quot;&gt;&lt;/a&gt;服务器型号&lt;/h3&gt;&lt;figure class=&quot;highlight autoit&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root&lt;span class=&quot;symbol&quot;&gt;@k80&lt;/span&gt; ~]&lt;span class=&quot;meta&quot;&gt;# dmidecode|grep &lt;span class=&quot;string&quot;&gt;&amp;quot;System Information&amp;quot;&lt;/span&gt; -A9|egrep  &lt;span class=&quot;string&quot;&gt;&amp;quot;Manufacturer|Product&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Manufacturer: Sugon&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Product Name: W580-G20123&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;操作系统&quot;&gt;&lt;a href=&quot;#操作系统&quot; class=&quot;headerlink&quot; title=&quot;操作系统&quot;&gt;&lt;/a&gt;操作系统&lt;/h3&gt;&lt;p&gt;查看当前操作系统发行版信息&lt;/p&gt;
&lt;figure class=&quot;highlight angelscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@k80 ~]&lt;/span&gt;# cat /etc/redhat-release&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CentOS Linux release &lt;span class=&quot;number&quot;&gt;7.3&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.1611&lt;/span&gt; (Core)&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="笔记" scheme="https://sugw.github.io/sugw.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>markdown语法绘制常用图实例</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/02/22/markdown%E8%AF%AD%E6%B3%95%E7%BB%98%E5%88%B6%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%AE%9E%E4%BE%8B/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/02/22/markdown%E8%AF%AD%E6%B3%95%E7%BB%98%E5%88%B6%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%AE%9E%E4%BE%8B/</id>
    <published>2021-02-22T06:36:08.684Z</published>
    <updated>2021-02-25T00:54:49.024Z</updated>
    
    
    <summary type="html">&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;经常要绘制流程图、时序图来做一些讲解和演示&lt;br&gt;但是绘制简单的图使用比较专业的工具略显麻烦 而且经常需要调整样式&lt;br&gt;看到markdown 有插件也支持绘图 干脆记录一下做个笔记&lt;/p&gt;
&lt;h3 id=&quot;安装识别绘图插件&quot;&gt;&lt;a href=&quot;#安装识别绘图插件&quot; class=&quot;headerlink&quot; title=&quot;安装识别绘图插件&quot;&gt;&lt;/a&gt;安装识别绘图插件&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;使用mermaid来进行绘制 官方文档:&lt;a href=&quot;https://mermaid-js.github.io/mermaid/#/&quot;&gt;https://mermaid-js.github.io/mermaid/#/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;mermaid支持 流程图、序列图、类图、状态图、实体关系图、用户旅程图、甘特图、指令图、饼图等 具体的查看官方文档&lt;/p&gt;</summary>
    
    
    
    <category term="笔记" scheme="https://sugw.github.io/sugw.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="笔记" scheme="https://sugw.github.io/sugw.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Mysql库CPU跑满处理</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/02/04/Mysql%E5%BA%93CPU%E8%B7%91%E6%BB%A1%E5%A4%84%E7%90%86/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/02/04/Mysql%E5%BA%93CPU%E8%B7%91%E6%BB%A1%E5%A4%84%E7%90%86/</id>
    <published>2021-02-04T05:50:34.681Z</published>
    <updated>2021-02-04T06:50:30.049Z</updated>
    
    
    <summary type="html">&lt;p&gt;起因：&lt;/p&gt;
&lt;p&gt;​      新业务，数据在测试库跑数据,然后把测试跑的数据放到正式环境数据库上，因测试数据库表没有建立联合索引，所以引发线上库慢查询+阻塞语句导致mysql数据库跑满cpu直接挂掉&lt;/p&gt;
&lt;p&gt;解决：&lt;/p&gt;
&lt;p&gt;​         1.关掉业务访问数据库的连接&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;&lt;p&gt;批量关闭阻塞语句&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;查询到阻塞的语句&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SELECT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p2.&amp;#96;HOST&amp;#96; 被阻塞方host,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p2.&amp;#96;USER&amp;#96; 被阻塞方用户,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;r.trx_id 被阻塞方事务id,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        r.trx_mysql_thread_id 被阻塞方线程号,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        TIMESTAMPDIFF(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            SECOND,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            r.trx_wait_started,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            CURRENT_TIMESTAMP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ) 等待时间,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        r.trx_query 被阻塞的查询,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l.lock_table 阻塞方锁住的表,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m.&amp;#96;lock_mode&amp;#96; 被阻塞方的锁模式,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m.&amp;#96;lock_type&amp;#96;  &amp;quot;被阻塞方的锁类型(表锁还是行锁)&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m.&amp;#96;lock_index&amp;#96; 被阻塞方锁住的索引,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m.&amp;#96;lock_space&amp;#96; 被阻塞方锁对象的space_id,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m.lock_page 被阻塞方事务锁定页的数量,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m.lock_rec 被阻塞方事务锁定行的数量,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m.lock_data  被阻塞方事务锁定记录的主键值,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p.&amp;#96;HOST&amp;#96; 阻塞方主机,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p.&amp;#96;USER&amp;#96; 阻塞方用户,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        b.trx_id 阻塞方事务id,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        b.trx_mysql_thread_id 阻塞方线程号,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        b.trx_query 阻塞方查询,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l.&amp;#96;lock_mode&amp;#96; 阻塞方的锁模式,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l.&amp;#96;lock_type&amp;#96; &amp;quot;阻塞方的锁类型(表锁还是行锁)&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l.&amp;#96;lock_index&amp;#96; 阻塞方锁住的索引,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l.&amp;#96;lock_space&amp;#96; 阻塞方锁对象的space_id,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l.lock_page 阻塞方事务锁定页的数量,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l.lock_rec 阻塞方事务锁定行的数量,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l.lock_data 阻塞方事务锁定记录的主键值,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      IF (p.COMMAND &amp;#x3D; &amp;#39;Sleep&amp;#39;, CONCAT(p.TIME,&amp;#39; 秒&amp;#39;), 0) 阻塞方事务空闲的时间&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FROM&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        information_schema.INNODB_LOCK_WAITS w&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INNER JOIN information_schema.INNODB_TRX b ON b.trx_id &amp;#x3D; w.blocking_trx_id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INNER JOIN information_schema.INNODB_TRX r ON r.trx_id &amp;#x3D; w.requesting_trx_id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INNER JOIN information_schema.INNODB_LOCKS l ON w.blocking_lock_id &amp;#x3D; l.lock_id  AND l.&amp;#96;lock_trx_id&amp;#96;&amp;#x3D;b.&amp;#96;trx_id&amp;#96;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      INNER JOIN information_schema.INNODB_LOCKS m ON m.&amp;#96;lock_id&amp;#96;&amp;#x3D;w.&amp;#96;requested_lock_id&amp;#96; AND m.&amp;#96;lock_trx_id&amp;#96;&amp;#x3D;r.&amp;#96;trx_id&amp;#96;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    INNER JOIN information_schema. PROCESSLIST p ON p.ID &amp;#x3D; b.trx_mysql_thread_id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; INNER JOIN information_schema. PROCESSLIST p2 ON p2.ID &amp;#x3D; r.trx_mysql_thread_id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ORDER BY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        等待时间 DESC;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="实践" scheme="https://sugw.github.io/sugw.github.io/categories/%E5%AE%9E%E8%B7%B5/"/>
    
    
    <category term="mysql" scheme="https://sugw.github.io/sugw.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Nginx内置变量详解</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/27/nginx%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F%E8%AF%A6%E8%A7%A3/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/27/nginx%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F%E8%AF%A6%E8%A7%A3/</id>
    <published>2021-01-27T10:30:13.267Z</published>
    <updated>2021-01-27T10:31:56.054Z</updated>
    
    
    <summary type="html">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60


$args                    #请求中的参数值
$query_string            #同 $args
$arg_NAME                #GET请求中NAME的值
$is_args            </summary>
    
    
    
    <category term="笔记" scheme="https://sugw.github.io/sugw.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Nginx限流（限制并发配置）</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/27/nginx%E9%99%90%E6%B5%81%EF%BC%88%E9%99%90%E5%88%B6%E5%B9%B6%E5%8F%91%E9%85%8D%E7%BD%AE%EF%BC%89/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/27/nginx%E9%99%90%E6%B5%81%EF%BC%88%E9%99%90%E5%88%B6%E5%B9%B6%E5%8F%91%E9%85%8D%E7%BD%AE%EF%BC%89/</id>
    <published>2021-01-27T01:53:52.114Z</published>
    <updated>2021-01-27T06:57:44.860Z</updated>
    
    
    <summary type="html">&lt;p&gt;系统设计时一般会预估负载，当系统暴露在公网中时，恶意攻击或正常突发流量等都可能导致系统被压垮，而限流就是保护措施之一。限流即控制流量，本文将记录 Nginx 的二种限流设置。&lt;/p&gt;
&lt;h2 id=&quot;生活中的-“限流”？&quot;&gt;&lt;a href=&quot;#生活中的-“限流”？&quot; class=&quot;headerlink&quot; title=&quot;生活中的 “限流”？&quot;&gt;&lt;/a&gt;生活中的 “限流”？&lt;/h2&gt;&lt;p&gt;限流并非新鲜事，在生活中亦无处不在，下面例举一二：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;博物馆：限制每天参观总人数以保护文物&lt;/li&gt;
&lt;li&gt;高铁安检：有若干安检口，旅客依次排队，工作人员根据安检快慢决定是否放人进去。遇到节假日，可以增加安检口来提高处理能力(&lt;strong&gt;横向拓展&lt;/strong&gt;)，同时增加排队等待区长度(&lt;strong&gt;缓存待处理任务&lt;/strong&gt;)。&lt;/li&gt;
&lt;li&gt;办理银行业务：所有人先领号，各窗口叫号处理。每个窗口处理速度根据客户具体业务而定，所有人排队等待叫号即可。若快下班时，告知客户明日再来(&lt;strong&gt;拒绝流量&lt;/strong&gt;)。&lt;/li&gt;
&lt;li&gt;水坝泄洪：水坝可以通过闸门控制泄洪速度(&lt;strong&gt;控制处理速度&lt;/strong&gt;)。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以上”限流”例子，可以让服务提供者稳定的服务客户。&lt;/p&gt;</summary>
    
    
    
    <category term="笔记" scheme="https://sugw.github.io/sugw.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Dockerfile ADD和COPY的区别</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/25/Dockerfile%20ADD%20%E5%92%8C%20COPY%20%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/25/Dockerfile%20ADD%20%E5%92%8C%20COPY%20%E7%9A%84%E5%8C%BA%E5%88%AB/</id>
    <published>2021-01-25T02:51:20.948Z</published>
    <updated>2021-01-25T02:56:44.013Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;Dockerfile-ADD-和-COPY-的区别&quot;&gt;&lt;a href=&quot;#Dockerfile-ADD-和-COPY-的区别&quot; class=&quot;headerlink&quot; title=&quot;Dockerfile ADD 和 COPY 的区别&quot;&gt;&lt;/a&gt;Dockerfile ADD 和 COPY 的区别&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;1、COPY命令&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;COPY命令用于将于Dockerfile所在目录中的文件在镜像构建阶段从宿主机拷贝到镜像中，对于文件而言可以直接将文件复制到镜像中，代码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight dockerfile&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; frolvlad/alpine-java:jre8-slim&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;MAINTAINER&lt;/span&gt; oas.cloud&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;ARG&lt;/span&gt; JAR_FILE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;COPY&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; &lt;span class=&quot;variable&quot;&gt;$&amp;#123;JAR_FILE&amp;#125;&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/oas/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;WORKDIR&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/oas/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;对于目录而言，该命令只复制目录中的内容而不包含目录自身，代码如下：&lt;/p&gt;</summary>
    
    
    
    <category term="笔记" scheme="https://sugw.github.io/sugw.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="docker" scheme="https://sugw.github.io/sugw.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>LVS NAT,DR,TUN三种负载原理</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/13/LVS%20NAT,DR,TUN%E4%B8%89%E7%A7%8D%E8%B4%9F%E8%BD%BD%E5%8E%9F%E7%90%86/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/13/LVS%20NAT,DR,TUN%E4%B8%89%E7%A7%8D%E8%B4%9F%E8%BD%BD%E5%8E%9F%E7%90%86/</id>
    <published>2021-01-13T10:18:49.394Z</published>
    <updated>2021-01-13T10:41:00.293Z</updated>
    
    
    <summary type="html">&lt;h3 id=&quot;负载均衡简单介绍&quot;&gt;&lt;a href=&quot;#负载均衡简单介绍&quot; class=&quot;headerlink&quot; title=&quot;负载均衡简单介绍&quot;&gt;&lt;/a&gt;负载均衡简单介绍&lt;/h3&gt;&lt;p&gt;用通俗的话来说负载均衡，就是通过不同的调度机制将用户的请求分派到后端不同的服务器。缓解服务器的请求压力，实现负载均衡的方案有多种，下面简单说说了解的几种方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DNS 负载：利用DNS的解析可以实现区域的性用户请求负载，这种负载方式是离用户最近的负载方案，请求还没有到达内部系统架构服务前就已经被分流了。&lt;/li&gt;
&lt;li&gt;LVS ：就是本篇文件要整理的解决方案，LVS性能特别强，它是工作在linux系统内核的一个程序，LVS负载的特点是超强的分流功能，但它只能负载调度流量的去向，没有办法实现在业务层分流负载。&lt;/li&gt;
&lt;li&gt;Haproxy：haproxy可以工作在ISO7层模型中的4层和7层，工作在4层时是基于IP的负载，这与LVS作用相同，工作在7层时是基于应用层的应用协议进行负载，可以根据分析报文内容并结合算法来选择后端服务&lt;/li&gt;
&lt;li&gt;Nginx： nginx也是应用层负载均衡器，可以实现反向代理功能，nginx的特点是可以将请求按照业务类型进行向后端调度，对请求从业务功能上进行了负载调度。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;lVS工作组成&quot;&gt;&lt;a href=&quot;#lVS工作组成&quot; class=&quot;headerlink&quot; title=&quot;lVS工作组成&quot;&gt;&lt;/a&gt;lVS工作组成&lt;/h3&gt;&lt;p&gt;LVS由两部分组成，包括ipvs和ipvsadm：&lt;/p&gt;</summary>
    
    
    
    <category term="负载均衡" scheme="https://sugw.github.io/sugw.github.io/categories/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    
    
    <category term="lvs" scheme="https://sugw.github.io/sugw.github.io/tags/lvs/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/13/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/13/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D/</id>
    <published>2021-01-13T10:15:30.597Z</published>
    <updated>2021-01-13T10:15:30.597Z</updated>
    
    
    <summary type="html">&lt;p&gt;title: lvs原理详解&lt;/p&gt;
&lt;p&gt;tags: lvs&lt;/p&gt;
&lt;p&gt;Catecsges:&lt;/p&gt;
&lt;h3 id=&quot;负载均衡简单介绍&quot;&gt;&lt;a href=&quot;#负载均衡简单介绍&quot; class=&quot;headerlink&quot; title=&quot;负载均衡简单介绍&quot;&gt;&lt;/a&gt;负载均衡简单介绍&lt;/h3&gt;&lt;p&gt;用通俗的话来说负载均衡，就是通过不同的调度机制将用户的请求分派到后端不同的服务器。缓解服务器的请求压力，实现负载均衡的方案有多种，下面简单说说了解的几种方式：&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>l2tp+ppp+ipsec</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/13/l2tp+ppp+ipsec/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/13/l2tp+ppp+ipsec/</id>
    <published>2021-01-13T07:19:02.041Z</published>
    <updated>2021-01-13T07:37:11.400Z</updated>
    
    
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;疫情期间，公司呼吁大家家里办公，家里办公需要连接vpn到公司内部网络，公司办公人员较多，环境较复杂，所以vpn需要支持mac、win、ios、Android系统&lt;/p&gt;
&lt;h2 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerlink&quot; title=&quot;环境&quot;&gt;&lt;/a&gt;环境&lt;/h2&gt;&lt;hr&gt;</summary>
    
    
    
    <category term="实战" scheme="https://sugw.github.io/sugw.github.io/categories/%E5%AE%9E%E6%88%98/"/>
    
    
    <category term="vpn" scheme="https://sugw.github.io/sugw.github.io/tags/vpn/"/>
    
  </entry>
  
  <entry>
    <title>nginx location匹配优先级</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20location%20%E5%8C%B9%E9%85%8D%E4%BC%98%E5%85%88%E7%BA%A7/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20location%20%E5%8C%B9%E9%85%8D%E4%BC%98%E5%85%88%E7%BA%A7/</id>
    <published>2021-01-12T10:25:15.530Z</published>
    <updated>2021-01-12T10:26:05.330Z</updated>
    
    
    <summary type="html">location 顺序优先级
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21


1、表达式的几种形式
~ 表示执行一个正则匹配，区分大小写

~* 表示执行一个正则匹配，不区分大小写

^~ 表示普通字符匹配。使用前缀匹配。如果匹配成功，则不再匹配其他location。

= 进行普通字符精确匹配。也就是完全匹配。

@ 它定义一个命名的 location，使用在内部定向时，例如 error_page, try_files

2、表达式之间的优先级
不同的表达式之间优先级不同，相同的表达式，匹配规则更长的优先级更高。

= 的优先级</summary>
    
    
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx日志格式</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F/</id>
    <published>2021-01-12T10:19:39.722Z</published>
    <updated>2021-01-12T10:27:55.571Z</updated>
    
    
    <summary type="html">nginx json格式日志定义：
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15


log_format json &#39;{ &quot;http_x_forwarded_for&quot;: &quot;$http_x_forwarded_for&quot;, &#39;
                        &#39; &quot;remote_addr&quot;: &quot;$remote_addr&quot;, &#39;
                        &#39;&quot;remote_user&quot;: &quot;$remote_user&quot;, &#39;
                         &#39;&quot;http_user_agent&quot;: &quot;$http_user_</summary>
    
    
    
    <category term="日志" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx 日志切割</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/</id>
    <published>2021-01-12T09:57:10.211Z</published>
    <updated>2021-01-12T10:18:00.278Z</updated>
    
    
    <summary type="html">1
2
3
4
5
6
7
8
9
10
11


#!/bin/bash
declare logs_path=&quot;/workspace/logs/nginx&quot;;
declare need_delete_path=${logs_path}/$(date -d &quot;21 days ago&quot; &quot;+%Y_%m_%d&quot;);
declare yestoday_log_path=${logs_path}/$(date -d &quot;yesterday&quot; &quot;+%Y_%m_%d&quot;);
rm -rf ${need_delete_path}
rm -rf ${yestoday_log_path}
mv ${logs_pat</summary>
    
    
    
    <category term="日志" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx 静态网站缓存</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%BC%93%E5%AD%98/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%20%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%BC%93%E5%AD%98/</id>
    <published>2021-01-12T09:37:26.514Z</published>
    <updated>2021-01-12T09:39:57.895Z</updated>
    
    
    <summary type="html">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28


location ~ .*\.(mp3|m4a|ogg|aac|wma|mp4|m4v|mpeg|webm|avi|swf|flv)$
  {
      expires      30d;
  }

  location ~ .*\.(gif|jpg|jpeg|png|bmp|webp|ico)$
  {
      expires      15d;
      access_log off;
  }

  location ~ .*\.</summary>
    
    
    
    <category term="优化" scheme="https://sugw.github.io/sugw.github.io/categories/%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Nginx优化详解</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/12/nginx%E4%BC%98%E5%8C%96/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/12/nginx%E4%BC%98%E5%8C%96/</id>
    <published>2021-01-12T09:01:12.210Z</published>
    <updated>2021-01-12T09:37:02.854Z</updated>
    
    
    <summary type="html">&lt;h3 id=&quot;1、Nginx运行工作进程数量&quot;&gt;&lt;a href=&quot;#1、Nginx运行工作进程数量&quot; class=&quot;headerlink&quot; title=&quot;1、Nginx运行工作进程数量&quot;&gt;&lt;/a&gt;1、Nginx运行工作进程数量&lt;/h3&gt;&lt;p&gt;Nginx运行工作进程个数一般设置CPU的核心或者核心数x2。如果不了解cpu的核数，可以top命令之后按1看出来，也可以查看/proc/cpuinfo文件 grep ^processor /proc/cpuinfo | wc -l&lt;/p&gt;
&lt;figure class=&quot;highlight angelscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@lx~]&lt;/span&gt;# vi/usr/local/nginx1&lt;span class=&quot;number&quot;&gt;.10&lt;/span&gt;/conf/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;worker_processes &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@lx~]&lt;/span&gt;# /usr/local/nginx1&lt;span class=&quot;number&quot;&gt;.10&lt;/span&gt;/sbin/nginx-s reload&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;[root@lx~]&lt;/span&gt;# ps -aux | grep nginx |grep -v grep&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root &lt;span class=&quot;number&quot;&gt;9834&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;47556&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1948&lt;/span&gt; ?     Ss &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: master processnginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www &lt;span class=&quot;number&quot;&gt;10135&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50088&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt; ?       S   &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: worker process&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www &lt;span class=&quot;number&quot;&gt;10136&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50088&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt; ?       S   &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: worker process&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www &lt;span class=&quot;number&quot;&gt;10137&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50088&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt; ?       S   &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: worker process&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www &lt;span class=&quot;number&quot;&gt;10138&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;50088&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt; ?       S   &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; nginx: worker process&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;2、Nginx运行CPU亲和力&quot;&gt;&lt;a href=&quot;#2、Nginx运行CPU亲和力&quot; class=&quot;headerlink&quot; title=&quot;2、Nginx运行CPU亲和力&quot;&gt;&lt;/a&gt;2、Nginx运行CPU亲和力&lt;/h3&gt;&lt;p&gt;比如4核配置：&lt;/p&gt;</summary>
    
    
    
    <category term="优化" scheme="https://sugw.github.io/sugw.github.io/categories/%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="nginx" scheme="https://sugw.github.io/sugw.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>mysql 删除表数据空间没有释放</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/06/mysql-delete/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/06/mysql-delete/</id>
    <published>2021-01-06T03:41:26.355Z</published>
    <updated>2021-01-07T10:08:21.001Z</updated>
    
    
    <summary type="html">&lt;p&gt;事件起因：&lt;/p&gt;
&lt;p&gt;今天运维人员找我，说我们的数据库磁盘空间满了。于是提供了一些删除表数据的sql给他，让他执行下。&lt;/p&gt;
&lt;p&gt;执行之后，查询数据库，表数据是不在了，但是问题来了。&lt;/p&gt;
&lt;p&gt;磁盘空间并没有释放，这是为啥咧？？？？&lt;/p&gt;
&lt;p&gt;于是乎，上网查找资料，功夫不负有心人，终于找到问题原因：&lt;/p&gt;</summary>
    
    
    
    <category term="数据库" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
  </entry>
  
  <entry>
    <title>mysql查看锁和解除锁</title>
    <link href="https://sugw.github.io/sugw.github.io/2021/01/06/mysql-%E6%9F%A5%E7%9C%8B%E9%94%81%E5%92%8C%E8%A7%A3%E9%99%A4%E9%94%81/"/>
    <id>https://sugw.github.io/sugw.github.io/2021/01/06/mysql-%E6%9F%A5%E7%9C%8B%E9%94%81%E5%92%8C%E8%A7%A3%E9%99%A4%E9%94%81/</id>
    <published>2021-01-06T03:41:26.355Z</published>
    <updated>2021-03-29T09:38:30.466Z</updated>
    
    
    <summary type="html">&lt;p&gt;解除正在死锁的状态有两种方法：&lt;/p&gt;
&lt;p&gt;第一种：&lt;/p&gt;
&lt;p&gt;1.查询是否锁表&lt;/p&gt;
&lt;p&gt;show OPEN TABLES where In_use &amp;gt; 0;&lt;/p&gt;
&lt;p&gt;2.查询进程（如果您有SUPER权限，您可以看到所有线程。否则，您只能看到您自己的线程）&lt;/p&gt;</summary>
    
    
    
    <category term="数据库" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
  </entry>
  
  <entry>
    <title>Jenkins pipeline 多服务器，多分支发版</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/12/23/Jenkins%20pipeline%20%E5%A4%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%A4%9A%E5%88%86%E6%94%AF%E5%8F%91%E7%89%88/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/12/23/Jenkins%20pipeline%20%E5%A4%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%A4%9A%E5%88%86%E6%94%AF%E5%8F%91%E7%89%88/</id>
    <published>2020-12-23T07:34:21.286Z</published>
    <updated>2021-01-07T10:25:20.718Z</updated>
    
    
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;一个项目部署到多台服务器，通过jenkins自由风格转变成pipeline风格&lt;/p&gt;
&lt;p&gt;发版效果：&lt;/p&gt;
&lt;p&gt;![image-20210107182025504](Jenkins pipeline 多服务器，多分支发版/image-20210107182025504.png)&lt;/p&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://sugw.github.io/sugw.github.io/categories/Jenkins/"/>
    
    
    <category term="jenkins" scheme="https://sugw.github.io/sugw.github.io/tags/jenkins/"/>
    
  </entry>
  
  <entry>
    <title>开启GTID的情况下导出导入库的注意事项</title>
    <link href="https://sugw.github.io/sugw.github.io/2020/12/17/%E5%BC%80%E5%90%AFGTID%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5%E5%BA%93%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%20/"/>
    <id>https://sugw.github.io/sugw.github.io/2020/12/17/%E5%BC%80%E5%90%AFGTID%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5%E5%BA%93%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%20/</id>
    <published>2020-12-17T02:04:49.059Z</published>
    <updated>2021-01-07T10:11:01.576Z</updated>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;在开启了 GTID 功能的 MySQL 数据库中, 不论是否使用了 GTID 的方式做了主从同步, 导出导入时都需要特别注意数据库中的 GTID 信息.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;导出&quot;&gt;&lt;a href=&quot;#导出&quot; class=&quot;headerlink&quot; title=&quot;导出&quot;&gt;&lt;/a&gt;导出&lt;/h1&gt;&lt;figure class=&quot;highlight routeros&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;➜  mysqldump -uroot -p userdb &amp;gt; userdb.sql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Warning: A partial dump &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; a&lt;span class=&quot;built_in&quot;&gt; server &lt;/span&gt;that has GTIDs will by&lt;span class=&quot;built_in&quot;&gt; default &lt;/span&gt;include the GTIDs of all transactions, even those that changed suppressed parts of the database. &lt;span class=&quot;keyword&quot;&gt;If&lt;/span&gt; you don&lt;span class=&quot;string&quot;&gt;&amp;#x27;t want to restore GTIDs, pass --set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;mysql提示: 当前数据库实例中开启了 GTID 功能, 在开启有 GTID 功能的数据库实例中, 导出其中任何一个库, 如果没有显示地指定&lt;code&gt;--set-gtid-purged&lt;/code&gt;参数, 都会提示这一行信息. 意思是默认情况下, 导出的库中含有 GTID 信息, 如果不想导出包含有 GTID 信息的数据库, 需要显示地添加&lt;code&gt;--set-gtid-purged=OFF&lt;/code&gt;参数. 于是乎, dump 变成了如下样子&lt;/p&gt;
&lt;figure class=&quot;highlight cmake&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;➜ mysqldump -uroot -p --&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;-gtid-purged=&lt;span class=&quot;keyword&quot;&gt;OFF&lt;/span&gt; userdb &amp;gt; userdb.sql&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="数据库" scheme="https://sugw.github.io/sugw.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="mysql" scheme="https://sugw.github.io/sugw.github.io/tags/mysql/"/>
    
  </entry>
  
</feed>
